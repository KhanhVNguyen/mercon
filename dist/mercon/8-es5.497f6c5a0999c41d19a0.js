(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"1gqn":function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},Gi3i:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n("mrSG"),r=n("FFOo"),o=n("T1DM");function s(e,t){return void 0===t&&(t=o.a),function(n){return n.lift(new u(e,t))}}var u=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.dueTime,this.scheduler))},e}(),a=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.dueTime=n,r.scheduler=i,r.debouncedSubscription=null,r.lastValue=null,r.hasValue=!1,r}return i.d(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(l,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(r.a);function l(e){e.debouncedNext()}},KKCa:function(e,t){e.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},MCLT:function(e,t,n){var i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++)n[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return n},r=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,o=i.length,s=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return e}}),a=i[n];n<o;a=i[++n])d(a)||!b(a)?s+=" "+a:s+=" "+u(a);return s},t.deprecate=function(e,n){if("undefined"!=typeof process&&!0===process.noDeprecation)return e;if("undefined"==typeof process)return function(){return t.deprecate(e,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),i=!0}return e.apply(this,arguments)}};var o,s={};function u(e,n){var i={seen:[],stylize:l};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),g(n)?i.showHidden=n:n&&t._extend(i,n),m(i.showHidden)&&(i.showHidden=!1),m(i.depth)&&(i.depth=2),m(i.colors)&&(i.colors=!1),m(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=a),c(i,e,i.depth)}function a(e,t){var n=u.styles[t];return n?"\x1b["+u.colors[n][0]+"m"+e+"\x1b["+u.colors[n][1]+"m":e}function l(e,t){return e}function c(e,n,i){if(e.customInspect&&n&&I(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,e);return y(r)||(r=c(e,r,i)),r}var o=function(e,t){if(m(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return v(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):d(t)?e.stylize("null","null"):void 0}(e,n);if(o)return o;var s,u=Object.keys(n),a=(s={},u.forEach(function(e,t){s[e]=!0}),s);if(e.showHidden&&(u=Object.getOwnPropertyNames(n)),k(n)&&(u.indexOf("message")>=0||u.indexOf("description")>=0))return f(n);if(0===u.length){if(I(n))return e.stylize("[Function"+(n.name?": "+n.name:"")+"]","special");if(A(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return e.stylize(Date.prototype.toString.call(n),"date");if(k(n))return f(n)}var l,b="",C=!1,B=["{","}"];return p(n)&&(C=!0,B=["[","]"]),I(n)&&(b=" [Function"+(n.name?": "+n.name:"")+"]"),A(n)&&(b=" "+RegExp.prototype.toString.call(n)),w(n)&&(b=" "+Date.prototype.toUTCString.call(n)),k(n)&&(b=" "+f(n)),0!==u.length||C&&0!=n.length?i<0?A(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=C?function(e,t,n,i,r){for(var o=[],s=0,u=t.length;s<u;++s)E(t,String(s))?o.push(h(e,t,n,i,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(h(e,t,n,i,r,!0))}),o}(e,n,i,a,u):u.map(function(t){return h(e,n,i,a,t,C)}),e.seen.pop(),function(e,t,n){return e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}(l,b,B)):B[0]+b+B[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,n,i,r,o){var s,u,a;if((a=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?u=e.stylize(a.set?"[Getter/Setter]":"[Getter]","special"):a.set&&(u=e.stylize("[Setter]","special")),E(i,r)||(s="["+r+"]"),u||(e.seen.indexOf(a.value)<0?(u=d(n)?c(e,a.value,null):c(e,a.value,n-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n")):u=e.stylize("[Circular]","special")),m(s)){if(o&&r.match(/^\d+$/))return u;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function p(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function d(e){return null===e}function v(e){return"number"==typeof e}function y(e){return"string"==typeof e}function m(e){return void 0===e}function A(e){return b(e)&&"[object RegExp]"===C(e)}function b(e){return"object"==typeof e&&null!==e}function w(e){return b(e)&&"[object Date]"===C(e)}function k(e){return b(e)&&("[object Error]"===C(e)||e instanceof Error)}function I(e){return"function"==typeof e}function C(e){return Object.prototype.toString.call(e)}function B(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(m(o)&&(o=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!s[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var n=process.pid;s[e]=function(){var i=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,i)}}else s[e]=function(){};return s[e]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=g,t.isNull=d,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=m,t.isRegExp=A,t.isObject=b,t.isDate=w,t.isError=k,t.isFunction=I,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n("1gqn");var _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,n;console.log("%s - %s",(n=[B((e=new Date).getHours()),B(e.getMinutes()),B(e.getSeconds())].join(":"),[e.getDate(),_[e.getMonth()],n].join(" ")),t.format.apply(t,arguments))},t.inherits=n("KKCa"),t._extend=function(e,t){if(!t||!b(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e};var x="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function O(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(x&&e[x]){var t;if("function"!=typeof(t=e[x]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,x,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,i=new Promise(function(e,i){t=e,n=i}),r=[],o=0;o<arguments.length;o++)r.push(arguments[o]);r.push(function(e,i){e?n(e):t(i)});try{e.apply(this,r)}catch(s){n(s)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),x&&Object.defineProperty(t,x,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=x,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=t.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var r=this,o=function(){return i.apply(r,arguments)};e.apply(this,t).then(function(e){process.nextTick(o,null,e)},function(e){process.nextTick(O,e,o)})}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,i(e)),t}},dFej:function(e,t,n){!function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}});var n=["prototype","__proto__","caller","arguments","length","name"];Object.getOwnPropertyNames(t).forEach(function(i){-1===n.indexOf(i)&&e[i]!==t[i]&&(e[i]=t[i])}),t&&u(e,t)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&u(r,n.prototype),r}).apply(null,arguments)}function l(e){var t="function"==typeof Map?new Map:void 0;return(l=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return a(e,arguments,s(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?c(e):t}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}var p=Object.values||function(e){var t=[];for(var n in e)t.push(e[n]);return t},g=Object.entries||function(e){var t=[];for(var n in e)t.push([n,e[n]]);return t},d=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.forEach(function(t){for(var n in t)e[n]=t[n]}),e},v=Object.fromEntries||function(e){var t={};return y(e).forEach(function(e){t[e[0]]=e[1]}),t},y=Array.from||function(e){if(e instanceof I){var t=[];return e.forEach(function(e,n){return t.push([n,e])}),t}return Array.prototype.slice.call(e)};function m(e){return-1!==this.indexOf(e)}Array.prototype.includes||(Array.prototype.includes=m),String.prototype.includes||(String.prototype.includes=m),String.prototype.startsWith||(String.prototype.startsWith=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.substring(t,t+e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return this.substring(t-e.length,t)===e});var A="undefined"!=typeof self?self:global,b=A.fetch||function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,i){var r=new XMLHttpRequest;if(r.open("get",e,!0),r.responseType="arraybuffer",r.onerror=i,t.headers)for(var o in t.headers)r.setRequestHeader(o,t.headers[o]);r.onload=function(){n({ok:r.status>=200&&r.status<300,status:r.status,arrayBuffer:function(){return Promise.resolve(r.response)}})},r.send(null)})},w=function(e){var t=[];if(Object.defineProperties(t,{size:{get:function(){return this.length}},has:{value:function(e){return-1!==this.indexOf(e)}},add:{value:function(e){this.has(e)||this.push(e)}},delete:{value:function(e){if(this.has(e)){var t=this.indexOf(e);this.splice(t,1)}}}}),Array.isArray(e))for(var n=0;n<e.length;n++)t.add(e[n]);return t},k=function(e){return new I(e)},I=void 0!==A.Map&&void 0!==A.Map.prototype.keys?A.Map:function(){function e(n){if(t(this,e),this.clear(),n)for(var i=0;i<n.length;i++)this.set(n[i][0],n[i][1])}return i(e,[{key:"clear",value:function(){this._map={},this._keys=[]}},{key:"get",value:function(e){return this._map["map_"+e]}},{key:"set",value:function(e,t){return this._map["map_"+e]=t,this._keys.indexOf(e)<0&&this._keys.push(e),this}},{key:"has",value:function(e){return this._keys.indexOf(e)>=0}},{key:"delete",value:function(e){var t=this._keys.indexOf(e);return!(t<0||(delete this._map["map_"+e],this._keys.splice(t,1),0))}},{key:"keys",value:function(){return this._keys.slice(0)}},{key:"values",value:function(){var e=this;return this._keys.map(function(t){return e.get(t)})}},{key:"entries",value:function(){var e=this;return this._keys.map(function(t){return[t,e.get(t)]})}},{key:"forEach",value:function(e,t){for(var n=0;n<this._keys.length;n++)e.call(t,this._map["map_"+this._keys[n]],this._keys[n],this)}},{key:"size",get:function(){return this._keys.length}}]),e}(),C="undefined"!=typeof self?self:global,B="undefined"!=typeof navigator,_=B&&"undefined"==typeof HTMLImageElement,E=!("undefined"==typeof global||"undefined"==typeof process||!process.versions||!process.versions.node),x=C.Buffer,O=C.BigInt,S=!!x,U=function(e){return void 0!==e};function P(e){return void 0===e||(e instanceof I?0===e.size:0===p(e).filter(U).length)}function F(e){var t=new Error(e);return delete t.stack,t}function j(e){var t=function(e){var t=0;return e.ifd0.enabled&&(t+=1024),e.exif.enabled&&(t+=2048),e.makerNote&&(t+=2048),e.userComment&&(t+=1024),e.gps.enabled&&(t+=512),e.interop.enabled&&(t+=100),e.ifd1.enabled&&(t+=1024),t+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}var Q="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0,M=function(){function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;if(t(this,e),"boolean"==typeof o&&(this.le=o),Array.isArray(n)&&(n=new Uint8Array(n)),0===n)this.byteOffset=0,this.byteLength=0;else if(n instanceof ArrayBuffer){void 0===r&&(r=n.byteLength-i);var s=new DataView(n,i,r);this._swapDataView(s)}else if(n instanceof Uint8Array||n instanceof DataView||n instanceof e){if(void 0===r&&(r=n.byteLength-i),(i+=n.byteOffset)+r>n.byteOffset+n.byteLength)throw F("Creating view outside of available memory in ArrayBuffer");var u=new DataView(n.buffer,i,r);this._swapDataView(u)}else{if("number"!=typeof n)throw F("Invalid input argument for BufferView: "+n);var a=new DataView(new ArrayBuffer(n));this._swapDataView(a)}}return i(e,null,[{key:"from",value:function(t,n){return t instanceof this&&t.le===n?t:new e(t,void 0,void 0,n)}}]),i(e,[{key:"_swapArrayBuffer",value:function(e){this._swapDataView(new DataView(e))}},{key:"_swapBuffer",value:function(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}},{key:"_swapDataView",value:function(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}},{key:"_lengthToEnd",value:function(e){return this.byteLength-e}},{key:"set",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;if(t instanceof DataView||t instanceof e?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),!(t instanceof Uint8Array))throw F("BufferView.set(): Invalid data argument.");return this.toUint8().set(t,n),new i(this,n,t.byteLength)}},{key:"subarray",value:function(t,n){return new e(this,t,n=n||this._lengthToEnd(t))}},{key:"toUint8",value:function(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}},{key:"getUint8Array",value:function(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}},{key:"getString",value:function(){return function(e){return Q?Q.decode(e):S?Buffer.from(e).toString("utf8"):decodeURIComponent(escape(String.fromCharCode.apply(null,e)))}(this.getUint8Array(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength))}},{key:"getUnicodeString",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=[],i=0;i<t&&e+i<this.byteLength;i+=2)n.push(this.getUint16(e+i));return n.map(function(e){return String.fromCharCode(e)}).join("")}},{key:"getInt8",value:function(e){return this.dataView.getInt8(e)}},{key:"getUint8",value:function(e){return this.dataView.getUint8(e)}},{key:"getInt16",value:function(e){return this.dataView.getInt16(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le)}},{key:"getInt32",value:function(e){return this.dataView.getInt32(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le)}},{key:"getUint16",value:function(e){return this.dataView.getUint16(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le)}},{key:"getUint32",value:function(e){return this.dataView.getUint32(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le)}},{key:"getFloat32",value:function(e){return this.dataView.getFloat32(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le)}},{key:"getFloat64",value:function(e){return this.dataView.getFloat64(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le)}},{key:"getFloat",value:function(e){return this.dataView.getFloat32(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le)}},{key:"getDouble",value:function(e){return this.dataView.getFloat64(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le)}},{key:"getUint64",value:function(e){var t=this.getUint32(e),n=this.getUint32(e+4);if(t<1048575)return t<<32|n;if(void 0!==typeof O)return console.warn("Using BigInt because of type 64uint but JS can only handle 53b numbers."),O(t)<<O(32)|O(n);throw F("Trying to read 64b value but JS can only handle 53b numbers.")}},{key:"getUintBytes",value:function(e,t,n){switch(t){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64(e,n)}}},{key:"getUint",value:function(e,t,n){switch(t){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64(e,n)}}},{key:"toString",value:function(e){return this.dataView.toString(e,this.constructor.name)}},{key:"ensureChunk",value:function(){}}]),e}();function D(e,t){throw F("".concat(e," '").concat(t,"' was not loaded, try using full build of exifr."))}var T=function(e){function n(e){var i;return t(this,n),(i=f(this,s(n).call(this))).kind=e,i}return o(n,l(I)),i(n,[{key:"get",value:function(e,t){return this.has(e)||D(this.kind,e),t&&(e in t||function(e,t){throw F("Unknown ".concat(e," '").concat(t,"'."))}(this.kind,e),t[e].enabled||D(this.kind,e)),h(s(n.prototype),"get",this).call(this,e)}},{key:"keyList",value:function(){return y(this.keys())}}]),n}(),R=new T("file parser"),z=new T("segment parser"),L=new T("file reader");function N(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}function V(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var G=N(function(e){return new Promise(function(t,n){var i=new FileReader;i.onloadend=function(){return t(i.result||new ArrayBuffer)},i.onerror=n,i.readAsArrayBuffer(e)})}),H=N(function(e){return b(e).then(function(e){return e.arrayBuffer()})}),q=N(function(e,t){return V(t(e),function(e){return new M(e)})}),W=N(function(e,t,n){var i=new(L.get(n))(e,t);return V(i.read(),function(){return i})}),Y=N(function(e,t,n,i){if(L.has(n))return W(e,t,n);if(i)return q(e,i);throw F("Parser ".concat(n," is not loaded"))});function X(e,t){if((n=e).startsWith("data:")||n.length>1e4)return W(e,t,"base64");if(B)return Y(e,t,"url",H);if(E)return W(e,t,"fs");throw F("Invalid input argument");var n}var K=function(e){function n(){return t(this,n),f(this,s(n).apply(this,arguments))}return o(n,l(I)),i(n,[{key:"tagKeys",get:function(){return this.allKeys||(this.allKeys=y(this.keys())),this.allKeys}},{key:"tagValues",get:function(){return this.allValues||(this.allValues=y(this.values())),this.allValues}}]),n}();function J(e,t,n){var i=new K,r=n;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=y(r));for(var o=0;o<r.length;o++){var s=r[o];i.set(s[0],s[1])}if(Array.isArray(t)){var u=t;Array.isArray(u)||("function"==typeof u.entries&&(u=u.entries()),u=y(u));for(var a=0;a<u.length;a++)e.set(u[a],i)}else e.set(t,i);return i}function Z(e,t,n){var i,r=e.get(t),o=n;Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=y(o));for(var s=0;s<o.length;s++)r.set((i=o[s])[0],i[1])}var $=k(),ee=k(),te=k(),ne=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],ie=["jfif","xmp","icc","iptc"],re=["tiff"].concat(ie),oe=["ifd0","ifd1","exif","gps","interop"],se=[].concat(re,oe),ue=["makerNote","userComment"],ae=["translateKeys","translateValues","reviveValues","multiSegment"],le=[].concat(ae,["sanitize","mergeOutput"]),ce=function(){function e(){t(this,e)}return i(e,[{key:"translate",get:function(){return this.translateKeys||this.translateValues||this.reviveValues}}]),e}(),fe=function(e){function n(e,i,o,u){var a;if(t(this,n),r(c(a=f(this,s(n).call(this))),"enabled",!1),r(c(a),"skip",w()),r(c(a),"pick",w()),r(c(a),"deps",w()),r(c(a),"translateKeys",!1),r(c(a),"translateValues",!1),r(c(a),"reviveValues",!1),a.key=e,a.enabled=i,a.parse=a.enabled,a.applyInheritables(u),a.canBeFiltered=oe.includes(e),a.canBeFiltered&&(a.dict=$.get(e)),void 0!==o)if(Array.isArray(o))a.parse=a.enabled=!0,a.canBeFiltered&&o.length>0&&a.translateTagSet(o,a.pick);else if("object"==typeof o){if(a.enabled=!0,a.parse=!1!==o.parse,a.canBeFiltered){var l=o.pick,h=o.skip;l&&l.length>0&&a.translateTagSet(l,a.pick),h&&h.length>0&&a.translateTagSet(h,a.skip)}a.applyInheritables(o)}else{if(!0!==o&&!1!==o)throw F("Invalid options argument: ".concat(o));a.parse=a.enabled=o}return a}return o(n,ce),i(n,[{key:"needed",get:function(){return this.enabled||this.deps.size>0}}]),i(n,[{key:"applyInheritables",value:function(e){var t,n,i=ae;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=y(i));for(var r=0;r<i.length;r++)void 0!==(n=e[t=i[r]])&&(this[t]=n)}},{key:"translateTagSet",value:function(e,t){if(this.dict){var n,i,r=this.dict,o=r.tagKeys,s=r.tagValues,u=e;Array.isArray(u)||("function"==typeof u.entries&&(u=u.entries()),u=y(u));for(var a=0;a<u.length;a++)"string"==typeof(n=u[a])?(-1===(i=s.indexOf(n))&&(i=o.indexOf(Number(n))),-1!==i&&t.add(Number(o[i]))):t.add(n)}else{var l=e;Array.isArray(l)||("function"==typeof l.entries&&(l=l.entries()),l=y(l));for(var c=0;c<l.length;c++)t.add(l[c])}}},{key:"finalizeFilters",value:function(){!this.enabled&&this.deps.size>0?(this.enabled=!0,ye(this.pick,this.deps)):this.enabled&&this.pick.size>0&&ye(this.pick,this.deps)}}]),n}(),he={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},pe=k(),ge=function(e){function n(e){var i;if(t(this,n),i=f(this,s(n).call(this)),!0===e)i.setupFromTrue();else if(void 0===e)i.setupFromUndefined();else if(Array.isArray(e))i.setupFromArray(e);else{if("object"!=typeof e)throw F("Invalid options argument ".concat(e));i.setupFromObject(e)}return void 0===i.firstChunkSize&&(i.firstChunkSize=B?i.firstChunkSizeBrowser:i.firstChunkSizeNode),i.mergeOutput&&(i.ifd1.enabled=!1),i.filterNestedSegmentTags(),i.traverseTiffDependencyTree(),i.checkLoadedPlugins(),i}return o(n,ce),i(n,null,[{key:"useCached",value:function(e){var t=pe.get(e);return void 0!==t?t:(t=new this(e),pe.set(e,t),t)}}]),i(n,[{key:"setupFromUndefined",value:function(){var e,t=ne;Array.isArray(t)||("function"==typeof t.entries&&(t=t.entries()),t=y(t));for(var n=0;n<t.length;n++)this[e=t[n]]=he[e];var i=le;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=y(i));for(var r=0;r<i.length;r++)this[e=i[r]]=he[e];var o=ue;Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=y(o));for(var s=0;s<o.length;s++)this[e=o[s]]=he[e];var u=se;Array.isArray(u)||("function"==typeof u.entries&&(u=u.entries()),u=y(u));for(var a=0;a<u.length;a++)this[e=u[a]]=new fe(e,he[e],void 0,this)}},{key:"setupFromTrue",value:function(){var e,t=ne;Array.isArray(t)||("function"==typeof t.entries&&(t=t.entries()),t=y(t));for(var n=0;n<t.length;n++)this[e=t[n]]=he[e];var i=le;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=y(i));for(var r=0;r<i.length;r++)this[e=i[r]]=he[e];var o=ue;Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=y(o));for(var s=0;s<o.length;s++)this[e=o[s]]=!0;var u=se;Array.isArray(u)||("function"==typeof u.entries&&(u=u.entries()),u=y(u));for(var a=0;a<u.length;a++)this[e=u[a]]=new fe(e,!0,void 0,this)}},{key:"setupFromArray",value:function(e){var t,n=ne;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=y(n));for(var i=0;i<n.length;i++)this[t=n[i]]=he[t];var r=le;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=y(r));for(var o=0;o<r.length;o++)this[t=r[o]]=he[t];var s=ue;Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=y(s));for(var u=0;u<s.length;u++)this[t=s[u]]=he[t];var a=se;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=y(a));for(var l=0;l<a.length;l++)this[t=a[l]]=new fe(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,oe)}},{key:"setupFromObject",value:function(e){var t;oe.ifd0=oe.ifd0||oe.image,oe.ifd1=oe.ifd1||oe.thumbnail,d(this,e);var n=ne;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=y(n));for(var i=0;i<n.length;i++)this[t=n[i]]=ve(e[t],he[t]);var r=le;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=y(r));for(var o=0;o<r.length;o++)this[t=r[o]]=ve(e[t],he[t]);var s=ue;Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=y(s));for(var u=0;u<s.length;u++)this[t=s[u]]=ve(e[t],he[t]);var a=re;Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=y(a));for(var l=0;l<a.length;l++)this[t=a[l]]=new fe(t,he[t],e[t],this);var c=oe;Array.isArray(c)||("function"==typeof c.entries&&(c=c.entries()),c=y(c));for(var f=0;f<c.length;f++)this[t=c[f]]=new fe(t,he[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,oe,se),!0===e.tiff?this.batchEnableWithBool(oe,!0):!1===e.tiff?this.batchEnableWithUserValue(oe,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,oe):"object"==typeof e.tiff&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,oe)}},{key:"batchEnableWithBool",value:function(e,t){var n=e;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=y(n));for(var i=0;i<n.length;i++)this[n[i]].enabled=t}},{key:"batchEnableWithUserValue",value:function(e,t){var n=e;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=y(n));for(var i=0;i<n.length;i++){var r=n[i],o=t[r];this[r].enabled=!1!==o&&void 0!==o}}},{key:"setupGlobalFilters",value:function(e,t,n){if(e&&e.length){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;Array.isArray(i)||("function"==typeof i.entries&&(i=i.entries()),i=y(i));for(var r=0;r<i.length;r++)this[i[r]].enabled=!1;var o=de(e,n);Array.isArray(o)||("function"==typeof o.entries&&(o=o.entries()),o=y(o));for(var s=0;s<o.length;s++){var u=o[s],a=u[0];ye(this[a].pick,u[1]),this[a].enabled=!0}}else if(t&&t.length){var l=de(t,n);Array.isArray(l)||("function"==typeof l.entries&&(l=l.entries()),l=y(l));for(var c=0;c<l.length;c++){var f=l[c];ye(this[f[0]].skip,f[1])}}}},{key:"filterNestedSegmentTags",value:function(){var e=this.ifd0,t=this.exif,n=this.xmp,i=this.iptc,r=this.icc;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),n.enabled||e.skip.add(700),i.enabled||e.skip.add(33723),r.enabled||e.skip.add(34675)}},{key:"traverseTiffDependencyTree",value:function(){var e=this,t=this.ifd0,n=this.exif,i=this.gps;this.interop.needed&&(n.deps.add(40965),t.deps.add(40965)),n.needed&&t.deps.add(34665),i.needed&&t.deps.add(34853),this.tiff.enabled=oe.some(function(t){return!0===e[t].enabled})||this.makerNote||this.userComment;var r=oe;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=y(r));for(var o=0;o<r.length;o++)this[r[o]].finalizeFilters()}},{key:"checkLoadedPlugins",value:function(){var e=re;Array.isArray(e)||("function"==typeof e.entries&&(e=e.entries()),e=y(e));for(var t=0;t<e.length;t++){var n=e[t];this[n].enabled&&!z.has(n)&&D("segment parser",n)}}},{key:"onlyTiff",get:function(){var e=this;return!ie.map(function(t){return e[t].enabled}).some(function(e){return!0===e})&&this.tiff.enabled}}]),n}();function de(e,t){var n,i,r,o=[],s=t;Array.isArray(s)||("function"==typeof s.entries&&(s=s.entries()),s=y(s));for(var u=0;u<s.length;u++){n=[];var a=$.get(i=s[u]);Array.isArray(a)||("function"==typeof a.entries&&(a=a.entries()),a=y(a));for(var l=0;l<a.length;l++)(e.includes((r=a[l])[0])||e.includes(r[1]))&&n.push(r[0]);n.length&&o.push([i,n])}return o}function ve(e,t){return void 0!==e?e:void 0!==t?t:void 0}function ye(e,t){var n=t;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=y(n));for(var i=0;i<n.length;i++)e.add(n[i])}r(ge,"default",he);var me={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},Ae=d({},me,{firstChunkSize:4e4,gps:[1,2,3,4]}),be=d({},me,{firstChunkSize:4e4,ifd0:[274]}),we=d({},me,{tiff:!1,ifd1:!0,mergeOutput:!1});function ke(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Ie(e,t){var n=e();return n&&n.then?n.then(t):t(n)}function Ce(){}var Be=function(){function e(n){t(this,e),r(this,"parsers",{}),this.options=ge.useCached(n)}return i(e,[{key:"setup",value:function(){if(!this.fileParser){var e,t=this.file.getUint16(0);if(18761===t||19789===t)this.file.isTiff=!0,e=R.get("tiff");else if(65496===t)this.file.isJpeg=!0,e=R.get("jpeg");else{if(!function(e){if(0!==e.getUint16(0))return!1;var t=e.getUint16(2);if(t>50)return!1;for(var n=16,i=[];n<t;)i.push(e.getString(n,4)),n+=4;return i.includes("heic")}(this.file))throw F("Unknown file format");this.file.isHeic=!0,e=R.get("heic")}this.fileParser=new e(this.options,this.file,this.parsers)}}},{key:"read",value:function(e){try{var t=this;return ke(function(e,t){if("string"==typeof e)return X(e,t);if(B&&!_&&e instanceof HTMLImageElement)return X(e.src,t);if(e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView)return new M(e);if(B&&e instanceof Blob)return Y(e,t,"blob",G);throw F("Invalid input argument")}(e,t.options),function(e){t.file=e})}catch(e){return Promise.reject(e)}}},{key:"parse",value:function(){try{var e=this;return e.setup(),ke(e.fileParser.parse(),function(){var t,n={},i=[],r=p(e.parsers).map((t=function(t){var r;return Ie(function(){return e.options.silentErrors?(o=function(){t.errors.length&&i.push.apply(i,t.errors)},(n=function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return ke(t.parse(),function(e){r=e})},function(e){i.push(e)}))&&n.then?n.then(o):o()):ke(t.parse(),function(e){r=e});var n,o},function(){t.assignToOutput(n,r)})},function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return Promise.resolve(t.apply(this,e))}catch(e){return Promise.reject(e)}}));return ke(Promise.all(r),function(){var t;return e.options.silentErrors&&i.length>0&&(n.errors=i),n=P(t=n)?void 0:t,e.file.close&&e.file.close(),n})})}catch(e){return Promise.reject(e)}}},{key:"extractThumbnail",value:function(){try{var e=this;e.setup();var t,n=z.get("tiff",e.options);return Ie(function(){if(!e.file.isTiff)return function(e){var t=e();if(t&&t.then)return t.then(Ce)}(function(){if(e.file.isJpeg)return ke(e.fileParser.getOrFindSegment("tiff"),function(e){t=e})});t={start:0,type:"tiff"}},function(){if(void 0!==t)return ke(e.fileParser.ensureSegmentChunk(t),function(t){return ke((e.parsers.tiff=new n(t,e.options,e.file)).extractThumbnail(),function(t){return e.file.close&&e.file.close(),t})})})}catch(e){return Promise.reject(e)}}}]),e}();function _e(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Ee(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}var xe=Ee(function(e){var t=new Be(be);return _e(t.read(e),function(){return _e(t.parse(),function(e){if(e&&e.ifd0)return e.ifd0[274]})})}),Oe=Ee(function(e){var t=new Be(Ae);return _e(t.read(e),function(){return _e(t.parse(),function(e){if(e&&e.gps){var t=e.gps;return{latitude:t.latitude,longitude:t.longitude}}})})}),Se=Ee(function(e){return _e(this.thumbnail(e),function(e){if(void 0!==e){var t=new Blob([e]);return URL.createObjectURL(t)}})}),Ue=Ee(function(e){var t=new Be(we);return _e(t.read(e),function(){return _e(t.extractThumbnail(),function(e){return e&&S?x.from(e):e})})}),Pe=Ee(function(e,t){var n=new Be(t);return _e(n.read(e),function(){return n.parse()})}),Fe=Object.freeze({__proto__:null,orientation:xe,gps:Oe,thumbnailUrl:Se,thumbnail:Ue,parse:Pe,Exifr:Be,fileParsers:R,segmentParsers:z,fileReaders:L,tagKeys:$,tagValues:ee,tagRevivers:te,createDictionary:J,extendDictionary:Z,fetchUrlAsArrayBuffer:H,readBlobAsArrayBuffer:G,chunkedProps:ne,otherSegments:ie,segments:re,tiffBlocks:oe,segmentsAndBlocks:se,tiffExtractables:ue,inheritables:ae,allFormatters:le,Options:ge,disableAllOptions:me,gpsOnlyOptions:Ae,orientationOnlyOptions:be,thumbnailOnlyOptions:we});function je(){}var Qe=function(e){function n(){var e,i;t(this,n);for(var o=arguments.length,u=new Array(o),a=0;a<o;a++)u[a]=arguments[a];return r(c(i=f(this,(e=s(n)).call.apply(e,[this].concat(u)))),"ranges",new Me),0!==i.byteLength&&i.ranges.add(0,i.byteLength),i}return o(n,M),i(n,[{key:"_tryExtend",value:function(e,t,n){if(0===e&&0===this.byteLength&&n){var i=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(i)}else{var r=e+t;if(r>this.byteLength){var o=this._extend(r).dataView;this._swapDataView(o)}}}},{key:"_extend",value:function(e){var t;t=S?x.allocUnsafe(e):new Uint8Array(e);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:n}}},{key:"subarray",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=t||this._lengthToEnd(e),i&&this._tryExtend(e,t),this.ranges.add(e,t),h(s(n.prototype),"subarray",this).call(this,e,t)}},{key:"set",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&this._tryExtend(t,e.byteLength,e);var i=h(s(n.prototype),"set",this).call(this,e,t);return this.ranges.add(t,i.byteLength),i}},{key:"ensureChunk",value:function(e,t){try{if(!this.chunked)return;if(this.ranges.available(e,t))return;return function(e,t){return e&&e.then?e.then(je):Promise.resolve()}(this.readChunk(e,t))}catch(e){return Promise.reject(e)}}},{key:"available",value:function(e,t){return this.ranges.available(e,t)}}]),n}(),Me=function(){function e(){t(this,e),r(this,"list",[])}return i(e,[{key:"add",value:function(e,t){var n=e+t,i=this.list.filter(function(t){return De(e,t.offset,n)||De(e,t.end,n)});if(i.length>0){e=Math.min.apply(Math,[e].concat(i.map(function(e){return e.offset}))),t=(n=Math.max.apply(Math,[n].concat(i.map(function(e){return e.end}))))-e;var r=i.shift();r.offset=e,r.length=t,r.end=n,this.list=this.list.filter(function(e){return!i.includes(e)})}else this.list.push({offset:e,length:t,end:n})}},{key:"available",value:function(e,t){var n=e+t;return this.list.some(function(t){return t.offset<=e&&n<=t.end})}},{key:"length",get:function(){return this.list.length}}]),e}();function De(e,t,n){return e<=t&&t<=n}function Te(){}function Re(e,t){if(!t)return e&&e.then?e.then(Te):Promise.resolve()}function ze(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}var Le=function(e){function n(){return t(this,n),f(this,s(n).apply(this,arguments))}return o(n,e),i(n,[{key:"readWhole",value:function(){try{var e=this;return e.chunked=!1,ze(G(e.input),function(t){e._swapArrayBuffer(t)})}catch(e){return Promise.reject(e)}}},{key:"readChunked",value:function(){return this.chunked=!0,this.size=this.input.size,h(s(n.prototype),"readChunked",this).call(this)}},{key:"_readChunk",value:function(e,t){try{var n=this,i=n.input.slice(e,t?e+t:void 0);return ze(G(i),function(t){return n.set(t,e,!0)})}catch(e){return Promise.reject(e)}}}]),n}(function(e){function n(e,i){var o;return t(this,n),r(c(o=f(this,s(n).call(this,0))),"chunksRead",0),o.input=e,o.options=i,o}return o(n,Qe),i(n,[{key:"readWhole",value:function(){try{return this.chunked=!1,Re(this.readChunk(this.nextChunkOffset))}catch(e){return Promise.reject(e)}}},{key:"readChunked",value:function(){try{return this.chunked=!0,Re(this.readChunk(0,this.options.firstChunkSize))}catch(e){return Promise.reject(e)}}},{key:"readNextChunk",value:function(e){try{if(void 0===e&&(e=this.nextChunkOffset),this.fullyRead)return this.chunksRead++,!1;var t=this.options.chunkSize;return n=this.readChunk(e,t),i=function(e){return!!e&&e.byteLength===t},n&&n.then||(n=Promise.resolve(n)),i?n.then(i):n}catch(e){return Promise.reject(e)}var n,i}},{key:"readChunk",value:function(e,t){try{if(this.chunksRead++,0===(t=this.safeWrapAddress(e,t)))return;return this._readChunk(e,t)}catch(e){return Promise.reject(e)}}},{key:"safeWrapAddress",value:function(e,t){return void 0!==this.size&&e+t>this.size?Math.max(0,this.size-e):t}},{key:"read",value:function(){return this.options.chunked?this.readChunked():this.readWhole()}},{key:"close",value:function(){}},{key:"nextChunkOffset",get:function(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}},{key:"canReadNextChunk",get:function(){return this.chunksRead<this.options.chunkLimit}},{key:"fullyRead",get:function(){return void 0!==this.size&&this.nextChunkOffset===this.size}}]),n}());L.set("blob",Le);var Ne=function(){function e(n,i,o){var s,u=this;t(this,e),r(this,"ensureSegmentChunk",(s=function(e){var t,n,i,r=e.start,o=e.size||65536;return t=function(){if(u.file.chunked)return function(){if(!u.file.available(r,o))return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return n=function(t){e.chunk=t},(t=u.file.readChunk(r,o))&&t.then||(t=Promise.resolve(t)),n?t.then(n):t;var t,n},function(t){throw F("Couldn't read segment: ".concat(JSON.stringify(e),". ").concat(t.message))});e.chunk=u.file.subarray(r,o)}();if(u.file.byteLength>r+o)e.chunk=u.file.subarray(r,o);else{if(void 0!==e.size)throw F("Segment unreachable: "+JSON.stringify(e));e.chunk=u.file.subarray(r)}},n=function(t){return e.chunk},(i=t())&&i.then?i.then(n):n()},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(s.apply(this,e))}catch(e){return Promise.reject(e)}})),this.extendOptions&&this.extendOptions(n),this.options=n,this.file=i,this.parsers=o}return i(e,[{key:"createParser",value:function(e,t){var n=new(z.get(e))(t,this.options,this.file);return this.parsers[e]=n}}]),e}(),Ve=function(){function e(n){var i=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;t(this,e),r(this,"errors",[]),r(this,"raw",k()),r(this,"handleError",function(e){if(!i.options.silentErrors)throw e;i.errors.push(e.message)}),this.chunk=this.normalizeInput(n),this.file=s,this.type=this.constructor.type,this.globalOptions=this.options=o,this.localOptions=o[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}return i(e,[{key:"normalizeInput",value:function(e){return e instanceof M?e:new M(e)}}],[{key:"findPosition",value:function(e,t){var n=e.getUint16(t+2)+2,i="function"==typeof this.headerLength?this.headerLength(e,t,n):this.headerLength,r=t+i,o=n-i;return{offset:t,length:n,headerLength:i,start:r,size:o,end:r+o}}},{key:"parse",value:function(e){return new this(e,new ge(r({},this.type,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))).parse()}}]),i(e,[{key:"translate",value:function(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}},{key:"translateBlock",value:function(e,t){var n=te.get(t),i=ee.get(t),r=$.get(t),o=this.options[t],s=o.reviveValues&&!!n,u=o.translateValues&&!!i,a=o.translateKeys&&!!r,l={},c=e;Array.isArray(c)||("function"==typeof c.entries&&(c=c.entries()),c=y(c));for(var f=0;f<c.length;f++){var h=c[f],p=h[0],g=h[1];s&&n.has(p)?g=n.get(p)(g):u&&i.has(p)&&(g=this.translateValue(g,i.get(p))),a&&r.has(p)&&(p=r.get(p)||p),l[p]=g}return l}},{key:"translateValue",value:function(e,t){return t[e]||e}},{key:"assignToOutput",value:function(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}},{key:"assignObjectToOutput",value:function(e,t,n){if(this.globalOptions.mergeOutput)return d(e,n);e[t]?d(e[t],n):e[t]=n}},{key:"output",get:function(){return this.translated?this.translated:this.raw?v(this.raw):void 0}}]),e}();function Ge(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function He(){}function qe(e,t){if(!t)return e&&e.then?e.then(He):Promise.resolve()}function We(e,t){var n=e();return n&&n.then?n.then(t):t(n)}function Ye(e,t,n){if(!e.s){if(n instanceof Xe){if(!n.s)return void(n.o=Ye.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(Ye.bind(null,e,t),Ye.bind(null,e,2));e.s=t,e.v=n;var i=e.o;i&&i(e)}}r(Ve,"headerLength",4),r(Ve,"type",void 0),r(Ve,"multiSegment",!1),r(Ve,"canHandle",function(){return!1});var Xe=function(){function e(){}return e.prototype.then=function(t,n){var i=new e,r=this.s;if(r){var o=1&r?t:n;if(o){try{Ye(i,1,o(this.v))}catch(e){Ye(i,2,e)}return i}return this}return this.o=function(e){try{var r=e.v;1&e.s?Ye(i,1,t?t(r):r):n?Ye(i,1,n(r)):Ye(i,2,r)}catch(e){Ye(i,2,e)}},i},e}();function Ke(e){return e instanceof Xe&&1&e.s}function Je(e){return 192===e||194===e||196===e||219===e||221===e||218===e||254===e}function Ze(e){return e>=224&&e<=239}function $e(e,t){var n=z;Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=y(n));for(var i=0;i<n.length;i++){var r=n[i],o=r[0];if(r[1].canHandle(e,t))return o}}var et=function(e){function n(){var e,i;t(this,n);for(var o=arguments.length,u=new Array(o),a=0;a<o;a++)u[a]=arguments[a];return r(c(i=f(this,(e=s(n)).call.apply(e,[this].concat(u)))),"appSegments",[]),r(c(i),"jpegSegments",[]),r(c(i),"unknownSegments",[]),i}return o(n,Ne),i(n,[{key:"parse",value:function(){try{var e=this;return Ge(e.findAppSegments(),function(){return Ge(e.readSegments(),function(){e.mergeMultiSegments(),e.createParsers()})})}catch(e){return Promise.reject(e)}}},{key:"readSegments",value:function(){try{var e=this.appSegments.map(this.ensureSegmentChunk);return qe(Promise.all(e))}catch(e){return Promise.reject(e)}}},{key:"setupSegmentFinderArgs",value:function(e){var t=this;!0===e?(this.findAll=!0,this.wanted=w(z.keyList())):(e=void 0===e?z.keyList().filter(function(e){return t.options[e].enabled}):e.filter(function(e){return t.options[e].enabled&&z.has(e)}),this.findAll=!1,this.remaining=w(e),this.wanted=w(e)),this.unfinishedMultiSegment=!1}},{key:"findAppSegments",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;try{var n=this;n.setupSegmentFinderArgs(t);var i=n.file,r=n.findAll,o=n.wanted,s=n.remaining;return We(function(){if(!r&&n.file.chunked)return r=y(o).some(function(e){return z.get(e).multiSegment&&n.options[e].multiSegment}),function(e){var t=function(){if(r)return qe(n.file.readWhole())}();if(t&&t.then)return t.then(He)}()},function(){var t=!1;if(e=n._findAppSegments(e,i.byteLength,r,o,s),!n.options.onlyTiff)return function(){if(i.chunked){var r=!1;return function(e,t,n){for(var i;;){var r=e();if(Ke(r)&&(r=r.v),!r)return o;if(r.then){i=0;break}var o=n();if(o&&o.then){if(!Ke(o)){i=1;break}o=o.s}if(t){var s=t();if(s&&s.then&&!Ke(s)){i=2;break}}}var u=new Xe,a=Ye.bind(null,u,2);return(0===i?r.then(c):1===i?o.then(l):s.then(f)).then(void 0,a),u;function l(i){o=i;do{if(t&&(s=t())&&s.then&&!Ke(s))return void s.then(f).then(void 0,a);if(!(r=e())||Ke(r)&&!r.v)return void Ye(u,1,o);if(r.then)return void r.then(c).then(void 0,a);Ke(o=n())&&(o=o.v)}while(!o||!o.then);o.then(l).then(void 0,a)}function c(e){e?(o=n())&&o.then?o.then(l).then(void 0,a):l(o):Ye(u,1,o)}function f(){(r=e())?r.then?r.then(c).then(void 0,a):c(r):Ye(u,1,o)}}(function(){return!t&&s.size>0&&!r&&(!!i.canReadNextChunk||!!n.unfinishedMultiSegment)},void 0,function(){var o=i.nextChunkOffset,s=n.appSegments.some(function(e){return!n.file.available(e.offset||e.start,e.length||e.size)});return We(function(){return Ge(i.readNextChunk(e>o&&!s?e:o),function(e){r=!e})},function(){void 0===(e=n._findAppSegments(e,i.byteLength))&&(t=!0)})})}}()})}catch(e){return Promise.reject(e)}}},{key:"_findAppSegments",value:function(e,t){for(var n,i,r,o,s,u,a=this.file,l=this.findAll,c=this.wanted,f=this.remaining,h=this.options;e<t;e++)if(255===a.getUint8(e))if(Ze(n=a.getUint8(e+1))){if(i=a.getUint16(e+2),(r=$e(a,e))&&c.has(r)&&(s=(o=z.get(r)).findPosition(a,e),u=h[r],s.type=r,this.appSegments.push(s),!l&&(o.multiSegment&&u.multiSegment?(this.unfinishedMultiSegment=s.chunkNumber<s.chunkCount,this.unfinishedMultiSegment||f.delete(r)):f.delete(r),0===f.size)))break;h.recordUnknownSegments&&((s=Ve.findPosition(a,e)).marker=n,this.unknownSegments.push(s)),e+=i+1}else if(Je(n)){if(i=a.getUint16(e+2),218===n&&!1!==h.stopAfterSos)return;h.recordJpegSegments&&this.jpegSegments.push({offset:e,length:i,marker:n}),e+=i+1}return e}},{key:"mergeMultiSegments",value:function(){var e=this;if(this.appSegments.some(function(e){return e.multiSegment})){var t=function(e,t){for(var n,i,r,o=k(),s=0;s<e.length;s++)o.has(i=(n=e[s]).type)?r=o.get(i):o.set(i,r=[]),r.push(n);return y(o)}(this.appSegments);this.mergedAppSegments=t.map(function(t){var n=t[0],i=t[1],r=z.get(n,e.options);return r.handleMultiSegments?{type:n,chunk:r.handleMultiSegments(i)}:i[0]})}}},{key:"createParsers",value:function(){try{var e=this.mergedAppSegments||this.appSegments;Array.isArray(e)||("function"==typeof e.entries&&(e=e.entries()),e=y(e));for(var t=0;t<e.length;t++){var n=e[t],i=n.type,r=n.chunk;if(this.options[i].enabled){var o=this.parsers[i];if(o&&o.append);else if(!o){var s=new(z.get(i,this.options))(r,this.options,this.file);this.parsers[i]=s}}}return Ge()}catch(e){return Promise.reject(e)}}},{key:"getSegment",value:function(e){return this.appSegments.find(function(t){return t.type===e})}},{key:"getOrFindSegment",value:function(e){try{var t=this,n=t.getSegment(e);return We(function(){if(void 0===n)return Ge(t.findAppSegments(0,[e]),function(){n=t.getSegment(e)})},function(){return n})}catch(e){return Promise.reject(e)}}}]),n}();function tt(){}function nt(e,t){if(!t)return e&&e.then?e.then(tt):Promise.resolve()}function it(e,t){var n=e();return n&&n.then?n.then(t):t(n)}R.set("jpeg",et);var rt=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],ot=function(e){function n(){return t(this,n),f(this,s(n).apply(this,arguments))}return o(n,e),i(n,[{key:"parse",value:function(){try{var e=this;return e.parseHeader(),it(function(){if(e.options.ifd0.enabled)return nt(e.parseIfd0Block())},function(){return it(function(){if(e.options.exif.enabled)return nt(e.saveParseBlock("parseExifBlock"))},function(){return it(function(){if(e.options.gps.enabled)return nt(e.saveParseBlock("parseGpsBlock"))},function(){return it(function(){if(e.options.interop.enabled)return nt(e.saveParseBlock("parseInteropBlock"))},function(){return it(function(){if(e.options.ifd1.enabled)return nt(e.saveParseBlock("parseThumbnailBlock"))},function(){return e.createOutput()})})})})})}catch(e){return Promise.reject(e)}}},{key:"saveParseBlock",value:function(e){try{var t=this;return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return(n=t[e]())&&n.then||(n=Promise.resolve(n)),n;var n},function(e){t.handleError(e)})}catch(e){return Promise.reject(e)}}},{key:"findIfd0Offset",value:function(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}},{key:"findIfd1Offset",value:function(){if(void 0===this.ifd1Offset){this.findIfd0Offset();var e=this.chunk.getUint16(this.ifd0Offset);this.ifd1Offset=this.chunk.getUint32(this.ifd0Offset+2+12*e)}}},{key:"parseBlock",value:function(e,t){var n=k();return this[t]=n,this.parseTags(e,t,n),n}},{key:"parseIfd0Block",value:function(){try{var e=this;if(e.ifd0)return;if(e.findIfd0Offset(),e.ifd0Offset<8)throw F("Invalid EXIF data: IFD0 offset should be less than 8");if(!e.file.chunked&&e.ifd0Offset>e.file.byteLength)throw F("IFD0 offset points to outside of file.\nthis.ifd0Offset: ".concat(e.ifd0Offset,", file.byteLength: ").concat(e.file.byteLength));return it(function(){if(e.file.isTiff)return nt(e.file.ensureChunk(e.ifd0Offset,j(e.options)))},function(){var t=e.parseBlock(e.ifd0Offset,"ifd0");if(0!==t.size)return e.exifOffset=t.get(34665),e.interopOffset=t.get(40965),e.gpsOffset=t.get(34853),e.xmp=t.get(700),e.iptc=t.get(33723),e.icc=t.get(34675),e.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t})}catch(e){return Promise.reject(e)}}},{key:"ensureBlockChunk",value:function(e,t){try{var n=this;return it(function(){if(n.file.isTiff)return nt(n.file.ensureChunk(e,t))},function(){e>n.chunk.byteLength&&(n.chunk=M.from(n.file,n.le))})}catch(e){return Promise.reject(e)}}},{key:"parseExifBlock",value:function(){try{var e=this;if(e.exif)return;return it(function(){if(!e.ifd0)return nt(e.parseIfd0Block())},function(){if(void 0!==e.exifOffset)return it(function(){if(e.file.isTiff)return nt(e.file.ensureChunk(e.exifOffset,j(e.options)))},function(){var t=e.parseBlock(e.exifOffset,"exif");return e.interopOffset||(e.interopOffset=t.get(40965)),e.makerNote=t.get(37500),e.userComment=t.get(37510),e.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),e.unpack(t,41728),e.unpack(t,41729),t})})}catch(e){return Promise.reject(e)}}},{key:"unpack",value:function(e,t){var n=e.get(t);n&&1===n.length&&e.set(t,n[0])}},{key:"parseGpsBlock",value:function(){try{var e=this;if(e.gps)return;return it(function(){if(!e.ifd0)return nt(e.parseIfd0Block())},function(){if(void 0!==e.gpsOffset){var t=e.parseBlock(e.gpsOffset,"gps");return t&&t.has(2)&&t.has(4)&&(t.set("latitude",st.apply(void 0,t.get(2).concat([t.get(1)]))),t.set("longitude",st.apply(void 0,t.get(4).concat([t.get(3)])))),t}})}catch(e){return Promise.reject(e)}}},{key:"parseInteropBlock",value:function(){try{var e=this;if(e.interop)return;return it(function(){if(!e.ifd0)return nt(e.parseIfd0Block())},function(){return it(function(){if(void 0===e.interopOffset&&!e.exif)return nt(e.parseExifBlock())},function(){if(void 0!==e.interopOffset)return e.parseBlock(e.interopOffset,"interop")})})}catch(e){return Promise.reject(e)}}},{key:"parseThumbnailBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{var t=this;if(t.ifd1||t.ifd1Parsed)return;if(t.options.mergeOutput&&!e)return;return t.findIfd1Offset(),t.ifd1Offset>0&&(t.parseBlock(t.ifd1Offset,"ifd1"),t.ifd1Parsed=!0),t.ifd1}catch(e){return Promise.reject(e)}}},{key:"extractThumbnail",value:function(){try{var e=this;return e.headerParsed||e.parseHeader(),it(function(){if(!e.ifd1Parsed)return nt(e.parseThumbnailBlock(!0))},function(){if(void 0!==e.ifd1){var t=e.ifd1.get(513),n=e.ifd1.get(514);return e.chunk.getUint8Array(t,n)}})}catch(e){return Promise.reject(e)}}},{key:"createOutput",value:function(){var e,t,n,i={},r=oe;Array.isArray(r)||("function"==typeof r.entries&&(r=r.entries()),r=y(r));for(var o=0;o<r.length;o++)if(!P(e=this[t=r[o]]))if(n=this.canTranslate?this.translateBlock(e,t):v(e),this.options.mergeOutput){if("ifd1"===t)continue;d(i,n)}else i[t]=n;return this.makerNote&&(i.makerNote=this.makerNote),this.userComment&&(i.userComment=this.userComment),i}},{key:"assignToOutput",value:function(e,t){if(this.globalOptions.mergeOutput)d(e,t);else{var n=g(t);Array.isArray(n)||("function"==typeof n.entries&&(n=n.entries()),n=y(n));for(var i=0;i<n.length;i++){var r=n[i];this.assignObjectToOutput(e,r[0],r[1])}}}},{key:"image",get:function(){return this.ifd0}},{key:"thumbnail",get:function(){return this.ifd1}}],[{key:"canHandle",value:function(e,t){return 225===e.getUint8(t+1)&&1165519206===e.getUint32(t+4)&&0===e.getUint16(t+8)}}]),n}(function(e){function n(){return t(this,n),f(this,s(n).apply(this,arguments))}return o(n,Ve),i(n,[{key:"parseHeader",value:function(){var e=this.chunk.getUint16();if(18761===e)this.le=!0;else{if(19789!==e)throw F("Invalid EXIF data: expected byte order marker (0x4949 or 0x4D4D).");this.le=!1}if(this.chunk.le=this.le,42!==this.chunk.getUint16(2))throw F("Invalid EXIF data: expected 0x002A.");this.headerParsed=!0}},{key:"parseTags",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k(),i=this.options[t],r=i.pick,o=i.skip,s=(r=w(r)).size>0,u=0===o.size,a=this.chunk.getUint16(e);e+=2;for(var l=0;l<a;l++){var c=this.chunk.getUint16(e);if(s){if(r.has(c)&&(n.set(c,this.parseTag(e,c,t)),r.delete(c),0===r.size))break}else!u&&o.has(c)||n.set(c,this.parseTag(e,c,t));e+=12}return n}},{key:"parseTag",value:function(e,t,n){var i,r=this.chunk.getUint16(e+2),o=this.chunk.getUint32(e+4),s=rt[r];if(s*o<=4?e+=8:e=this.chunk.getUint32(e+8),r<1||r>13)throw F("Invalid TIFF value type. block: ".concat(n.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(r,", offset ").concat(e));if(e>this.chunk.byteLength)throw F("Invalid TIFF value offset. block: ".concat(n.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(r,", offset ").concat(e," is outside of chunk size ").concat(this.chunk.byteLength));if(1===r)return this.chunk.getUint8Array(e,o);if(2===r)return""===(i=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(i=this.chunk.getString(e,o)).trim())?void 0:i;if(7===r)return this.chunk.getUint8Array(e,o);if(1===o)return this.parseTagValue(r,e);for(var u=new Array(o),a=s,l=0;l<o;l++)u[l]=this.parseTagValue(r,e),e+=a;return u}},{key:"parseTagValue",value:function(e,t){switch(e){case 1:return this.chunk.getUint8(t);case 3:return this.chunk.getUint16(t);case 4:return this.chunk.getUint32(t);case 5:return this.chunk.getUint32(t)/this.chunk.getUint32(t+4);case 6:return this.chunk.getInt8(t);case 8:return this.chunk.getInt16(t);case 9:return this.chunk.getInt32(t);case 10:return this.chunk.getInt32(t)/this.chunk.getInt32(t+4);case 11:return this.chunk.getFloat(t);case 12:return this.chunk.getDouble(t);case 13:return this.chunk.getUint32(t);default:throw F("Invalid tiff type ".concat(e))}}}]),n}());function st(e,t,n,i){var r=e+t/60+n/3600;return"S"!==i&&"W"!==i||(r*=-1),r}r(ot,"type","tiff"),r(ot,"headerLength",10),z.set("tiff",ot),e.Exifr=Be,e.Options=ge,e.allFormatters=le,e.chunkedProps=ne,e.createDictionary=J,e.default=Fe,e.disableAllOptions=me,e.extendDictionary=Z,e.fetchUrlAsArrayBuffer=H,e.fileParsers=R,e.fileReaders=L,e.gps=Oe,e.gpsOnlyOptions=Ae,e.inheritables=ae,e.orientation=xe,e.orientationOnlyOptions=be,e.otherSegments=ie,e.parse=Pe,e.readBlobAsArrayBuffer=G,e.segmentParsers=z,e.segments=re,e.segmentsAndBlocks=se,e.tagKeys=$,e.tagRevivers=te,e.tagValues=ee,e.thumbnail=Ue,e.thumbnailOnlyOptions=we,e.thumbnailUrl=Se,e.tiffBlocks=oe,e.tiffExtractables=ue,Object.defineProperty(e,"__esModule",{value:!0})}(t)},gkvR:function(e,t,n){var i;e.exports=function e(t,n,r){function o(u,a){if(!n[u]){if(!t[u]){if(!a&&"function"==typeof i&&i)return i(u,!0);if(s)return s(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[u]={exports:{}};t[u][0].call(c.exports,function(e){return o(t[u][1][e]||e)},c,c.exports,e,t,n,r)}return n[u].exports}for(var s="function"==typeof i&&i,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){"use strict";var i=e("inherits"),r=e("multimath"),o=e("multimath/lib/unsharp_mask"),s=e("./mm_resize");function u(e){var t=e||[],n={js:t.indexOf("js")>=0,wasm:t.indexOf("wasm")>=0};r.call(this,n),this.features={js:n.js,wasm:n.wasm&&this.has_wasm()},this.use(o),this.use(s)}i(u,r),u.prototype.resizeAndUnsharp=function(e,t){var n=this.resize(e,t);return e.unsharpAmount&&this.unsharp_mask(n,e.toWidth,e.toHeight,e.unsharpAmount,e.unsharpRadius,e.unsharpThreshold),n},t.exports=u},{"./mm_resize":4,inherits:15,multimath:16,"multimath/lib/unsharp_mask":19}],2:[function(e,t,n){"use strict";function i(e){return e<0?0:e>255?255:e}t.exports={convolveHorizontally:function(e,t,n,r,o,s){var u,a,l,c,f,h,p,g,d,v,y,m=0,A=0;for(d=0;d<r;d++){for(f=0,v=0;v<o;v++){for(h=s[f++],p=s[f++],g=m+4*h|0,u=a=l=c=0;p>0;p--)c=c+(y=s[f++])*e[g+3]|0,l=l+y*e[g+2]|0,a=a+y*e[g+1]|0,u=u+y*e[g]|0,g=g+4|0;t[A+3]=i(c+8192>>14),t[A+2]=i(l+8192>>14),t[A+1]=i(a+8192>>14),t[A]=i(u+8192>>14),A=A+4*r|0}A=4*(d+1)|0,m=(d+1)*n*4|0}},convolveVertically:function(e,t,n,r,o,s){var u,a,l,c,f,h,p,g,d,v,y,m=0,A=0;for(d=0;d<r;d++){for(f=0,v=0;v<o;v++){for(h=s[f++],p=s[f++],g=m+4*h|0,u=a=l=c=0;p>0;p--)c=c+(y=s[f++])*e[g+3]|0,l=l+y*e[g+2]|0,a=a+y*e[g+1]|0,u=u+y*e[g]|0,g=g+4|0;t[A+3]=i(c+8192>>14),t[A+2]=i(l+8192>>14),t[A+1]=i(a+8192>>14),t[A]=i(u+8192>>14),A=A+4*r|0}A=4*(d+1)|0,m=(d+1)*n*4|0}}}},{}],3:[function(e,t,n){"use strict";t.exports="AGFzbQEAAAABFAJgBn9/f39/fwBgB39/f39/f38AAg8BA2VudgZtZW1vcnkCAAEDAwIAAQQEAXAAAAcZAghjb252b2x2ZQAACmNvbnZvbHZlSFYAAQkBAArmAwLBAwEQfwJAIANFDQAgBEUNACAFQQRqIRVBACEMQQAhDQNAIA0hDkEAIRFBACEHA0AgB0ECaiESAn8gBSAHQQF0IgdqIgZBAmouAQAiEwRAQQAhCEEAIBNrIRQgFSAHaiEPIAAgDCAGLgEAakECdGohEEEAIQlBACEKQQAhCwNAIBAoAgAiB0EYdiAPLgEAIgZsIAtqIQsgB0H/AXEgBmwgCGohCCAHQRB2Qf8BcSAGbCAKaiEKIAdBCHZB/wFxIAZsIAlqIQkgD0ECaiEPIBBBBGohECAUQQFqIhQNAAsgEiATagwBC0EAIQtBACEKQQAhCUEAIQggEgshByABIA5BAnRqIApBgMAAakEOdSIGQf8BIAZB/wFIG0EQdEGAgPwHcUEAIAZBAEobIAtBgMAAakEOdSIGQf8BIAZB/wFIG0EYdEEAIAZBAEobciAJQYDAAGpBDnUiBkH/ASAGQf8BSBtBCHRBgP4DcUEAIAZBAEobciAIQYDAAGpBDnUiBkH/ASAGQf8BSBtB/wFxQQAgBkEAShtyNgIAIA4gA2ohDiARQQFqIhEgBEcNAAsgDCACaiEMIA1BAWoiDSADRw0ACwsLIQACQEEAIAIgAyAEIAUgABAAIAJBACAEIAUgBiABEAALCw=="},{}],4:[function(e,t,n){"use strict";t.exports={name:"resize",fn:e("./resize"),wasm_fn:e("./resize_wasm"),wasm_src:e("./convolve_wasm_base64")}},{"./convolve_wasm_base64":3,"./resize":5,"./resize_wasm":8}],5:[function(e,t,n){"use strict";var i=e("./resize_filter_gen"),r=e("./convolve").convolveHorizontally,o=e("./convolve").convolveVertically;t.exports=function(e){var t=e.src,n=e.width,s=e.height,u=e.toWidth,a=e.toHeight,l=e.scaleX||e.toWidth/e.width,c=e.scaleY||e.toHeight/e.height,f=e.offsetX||0,h=e.offsetY||0,p=e.dest||new Uint8Array(u*a*4),g=void 0===e.quality?3:e.quality,d=e.alpha||!1,v=i(g,n,u,l,f),y=i(g,s,a,c,h),m=new Uint8Array(u*s*4);return r(t,m,n,s,u,v),o(m,p,s,u,a,y),d||function(e,t,n){for(var i=3,r=u*a*4|0;i<r;)e[i]=255,i=i+4|0}(p),p}},{"./convolve":2,"./resize_filter_gen":6}],6:[function(e,t,n){"use strict";var i=e("./resize_filter_info"),r=14;function o(e){return Math.round(e*((1<<r)-1))}t.exports=function(e,t,n,r,s){var u,a,l,c,f,h,p,g,d,v,y,m,A,b,w,k,I=i[e].filter,C=1/r,B=Math.min(1,r),_=i[e].win/B,E=Math.floor(2*(_+1)),x=new Int16Array((E+2)*n),O=0,S=!x.subarray||!x.set;for(u=0;u<n;u++){for(a=(u+.5)*C+s,l=Math.max(0,Math.floor(a-_)),f=(c=Math.min(t-1,Math.ceil(a+_)))-l+1,h=new Float32Array(f),p=new Int16Array(f),g=0,d=l,v=0;d<=c;d++,v++)g+=y=I((d+.5-a)*B),h[v]=y;for(m=0,v=0;v<h.length;v++)m+=A=h[v]/g,p[v]=o(A);for(p[n>>1]+=o(1-m),b=0;b<p.length&&0===p[b];)b++;if(b<p.length){for(w=p.length-1;w>0&&0===p[w];)w--;if(k=w-b+1,x[O++]=l+b,x[O++]=k,S)for(v=b;v<=w;v++)x[O++]=p[v];else x.set(p.subarray(b,w+1),O),O+=k}else x[O++]=0,x[O++]=0}return x}},{"./resize_filter_info":7}],7:[function(e,t,n){"use strict";t.exports=[{win:.5,filter:function(e){return e>=-.5&&e<.5?1:0}},{win:1,filter:function(e){if(e<=-1||e>=1)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*(.54+.46*Math.cos(t/1))}},{win:2,filter:function(e){if(e<=-2||e>=2)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/2)/(t/2)}},{win:3,filter:function(e){if(e<=-3||e>=3)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var t=e*Math.PI;return Math.sin(t)/t*Math.sin(t/3)/(t/3)}}]},{}],8:[function(e,t,n){"use strict";var i=e("./resize_filter_gen"),r=!0;try{r=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0]}catch(s){}function o(e,t,n){if(r)t.set(function(e){return new Uint8Array(e.buffer,0,e.byteLength)}(e),n);else for(var i=n,o=0;o<e.length;o++){var s=e[o];t[i++]=255&s,t[i++]=s>>8&255}}t.exports=function(e){var t=e.src,n=e.width,r=e.height,s=e.toWidth,u=e.toHeight,a=e.scaleX||e.toWidth/e.width,l=e.scaleY||e.toHeight/e.height,c=e.offsetX||0,f=e.offsetY||0,h=e.dest||new Uint8Array(s*u*4),p=void 0===e.quality?3:e.quality,g=e.alpha||!1,d=i(p,n,s,a,c),v=i(p,r,u,l,f),y=this.__align(0+Math.max(t.byteLength,h.byteLength)),m=this.__align(y+r*s*4),A=this.__align(m+d.byteLength),b=this.__instance("resize",A+v.byteLength),w=new Uint8Array(this.__memory.buffer),k=new Uint32Array(this.__memory.buffer),I=new Uint32Array(t.buffer);return k.set(I),o(d,w,m),o(v,w,A),(b.exports.convolveHV||b.exports._convolveHV)(m,A,y,n,r,s,u),new Uint32Array(h.buffer).set(new Uint32Array(this.__memory.buffer,0,u*s)),g||function(e,t,n){for(var i=3,r=s*u*4|0;i<r;)e[i]=255,i=i+4|0}(h),h}},{"./resize_filter_gen":6}],9:[function(e,t,n){"use strict";function i(e,t){this.create=e,this.available=[],this.acquired={},this.lastId=1,this.timeoutId=0,this.idle=t||2e3}i.prototype.acquire=function(){var e,t=this;return 0!==this.available.length?e=this.available.pop():((e=this.create()).id=this.lastId++,e.release=function(){return t.release(e)}),this.acquired[e.id]=e,e},i.prototype.release=function(e){var t=this;delete this.acquired[e.id],e.lastUsed=Date.now(),this.available.push(e),0===this.timeoutId&&(this.timeoutId=setTimeout(function(){return t.gc()},100))},i.prototype.gc=function(){var e=this,t=Date.now();this.available=this.available.filter(function(n){return!(t-n.lastUsed>e.idle&&(n.destroy(),1))}),this.timeoutId=0!==this.available.length?setTimeout(function(){return e.gc()},100):0},t.exports=i},{}],10:[function(e,t,n){"use strict";t.exports=function(e,t,n,i,r,o){var s=(2*o+2+1)/r;if(s>.5)return[[n,i]];var u=Math.ceil(Math.log(Math.min(n/e,i/t))/Math.log(s));if(u<=1)return[[n,i]];for(var a=[],l=0;l<u;l++){var c=Math.round(Math.pow(Math.pow(e,u-l-1)*Math.pow(n,l+1),1/u)),f=Math.round(Math.pow(Math.pow(t,u-l-1)*Math.pow(i,l+1),1/u));a.push([c,f])}return a}},{}],11:[function(e,t,n){"use strict";var i=1e-5;function r(e){var t=Math.round(e);return Math.abs(e-t)<i?t:Math.floor(e)}function o(e){var t=Math.round(e);return Math.abs(e-t)<i?t:Math.ceil(e)}t.exports=function(e){var t,n,i,s,u,a,l=e.toWidth/e.width,c=e.toHeight/e.height,f=r(e.srcTileSize*l)-2*e.destTileBorder,h=r(e.srcTileSize*c)-2*e.destTileBorder;if(f<1||h<1)throw new Error("Internal error in pica: target tile width/height is too small.");var p,g=[];for(s=0;s<e.toHeight;s+=h)for(i=0;i<e.toWidth;i+=f)(t=i-e.destTileBorder)<0&&(t=0),t+(u=i+f+e.destTileBorder-t)>=e.toWidth&&(u=e.toWidth-t),(n=s-e.destTileBorder)<0&&(n=0),n+(a=s+h+e.destTileBorder-n)>=e.toHeight&&(a=e.toHeight-n),p={toX:t,toY:n,toWidth:u,toHeight:a,toInnerX:i,toInnerY:s,toInnerWidth:f,toInnerHeight:h,offsetX:t/l-r(t/l),offsetY:n/c-r(n/c),scaleX:l,scaleY:c,x:r(t/l),y:r(n/c),width:o(u/l),height:o(a/c)},g.push(p);return g}},{}],12:[function(e,t,n){"use strict";function i(e){return Object.prototype.toString.call(e)}t.exports.isCanvas=function(e){var t=i(e);return"[object HTMLCanvasElement]"===t||"[object OffscreenCanvas]"===t||"[object Canvas]"===t},t.exports.isImage=function(e){return"[object HTMLImageElement]"===i(e)},t.exports.isImageBitmap=function(e){return"[object ImageBitmap]"===i(e)},t.exports.limiter=function(e){var t=0,n=[];function i(){t<e&&n.length&&(t++,n.shift()())}return function(e){return new Promise(function(r,o){n.push(function(){e().then(function(e){r(e),t--,i()},function(e){o(e),t--,i()})}),i()})}},t.exports.cib_quality_name=function(e){switch(e){case 0:return"pixelated";case 1:return"low";case 2:return"medium"}return"high"},t.exports.cib_support=function(){return Promise.resolve().then(function(){if("undefined"==typeof createImageBitmap||"undefined"==typeof document)return!1;var e=document.createElement("canvas");return e.width=100,e.height=100,createImageBitmap(e,0,0,100,100,{resizeWidth:10,resizeHeight:10,resizeQuality:"high"}).then(function(t){var n=10===t.width;return t.close(),e=null,n})}).catch(function(){return!1})}},{}],13:[function(e,t,n){"use strict";t.exports=function(){var t,n=e("./mathlib");onmessage=function(e){var i=e.data.opts;t||(t=new n(e.data.features));var r=t.resizeAndUnsharp(i);postMessage({result:r},[r.buffer])}}},{"./mathlib":1}],14:[function(e,t,n){var i,r,o,s,u,a;function l(e,t,n,i,r,o){var s,u,a,l,c,f,h,p,g,d,v,y,m,A;for(g=0;g<o;g++){for(h=g,p=0,l=c=(s=e[f=g*r])*i[6],v=i[0],y=i[1],m=i[4],A=i[5],d=0;d<r;d++)a=(u=e[f])*v+s*y+l*m+c*A,c=l,s=u,n[p]=l=a,p++,f++;for(p--,h+=o*(r-1),l=c=(s=e[--f])*i[7],u=s,v=i[2],y=i[3],d=r-1;d>=0;d--)a=u*v+s*y+l*m+c*A,c=l,s=u,u=e[f],t[h]=n[p]+(l=a),f--,p--,h-=o}}t.exports=function(e,t,n,c){if(c){var f=new Uint16Array(e.length),h=new Float32Array(Math.max(t,n)),p=function(e){e<.5&&(e=.5);var t=Math.exp(.527076)/e,n=Math.exp(-t),l=Math.exp(-2*t),c=(1-n)*(1-n)/(1+2*t*n-l);return i=c,r=c*(t-1)*n,o=c*(t+1)*n,s=-c*l,u=2*n,a=-l,new Float32Array([i,r,o,s,u,a,(i+r)/(1-u-a),(o+s)/(1-u-a)])}(c);l(e,f,h,p,t,n),l(f,e,h,p,n,t)}}},{}],15:[function(e,t,n){t.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],16:[function(e,t,n){"use strict";var i=e("object-assign"),r=e("./lib/base64decode"),o=e("./lib/wa_detect"),s={js:!0,wasm:!0};function u(e){if(!(this instanceof u))return new u(e);var t=i({},s,e||{});if(this.options=t,this.__cache={},this.__init_promise=null,this.__modules=t.modules||{},this.__memory=null,this.__wasm={},this.__isLE=1===new Uint32Array(new Uint8Array([1,0,0,0]).buffer)[0],!this.options.js&&!this.options.wasm)throw new Error('mathlib: at least "js" or "wasm" should be enabled')}u.prototype.has_wasm=o,u.prototype.use=function(e){return this.__modules[e.name]=e,this[e.name]=this.options.wasm&&this.has_wasm()&&e.wasm_fn?e.wasm_fn:e.fn,this},u.prototype.init=function(){if(this.__init_promise)return this.__init_promise;if(!this.options.js&&this.options.wasm&&!this.has_wasm())return Promise.reject(new Error('mathlib: only "wasm" was enabled, but it\'s not supported'));var e=this;return this.__init_promise=Promise.all(Object.keys(e.__modules).map(function(t){var n=e.__modules[t];return e.options.wasm&&e.has_wasm()&&n.wasm_fn?e.__wasm[t]?null:WebAssembly.compile(e.__base64decode(n.wasm_src)).then(function(n){e.__wasm[t]=n}):null})).then(function(){return e}),this.__init_promise},u.prototype.__base64decode=r,u.prototype.__reallocate=function(e){if(!this.__memory)return this.__memory=new WebAssembly.Memory({initial:Math.ceil(e/65536)}),this.__memory;var t=this.__memory.buffer.byteLength;return t<e&&this.__memory.grow(Math.ceil((e-t)/65536)),this.__memory},u.prototype.__instance=function(e,t,n){if(t&&this.__reallocate(t),this.__wasm[e]||(this.__wasm[e]=new WebAssembly.Module(this.__base64decode(this.__modules[e].wasm_src))),!this.__cache[e]){var r={memoryBase:0,memory:this.__memory,tableBase:0,table:new WebAssembly.Table({initial:0,element:"anyfunc"})};this.__cache[e]=new WebAssembly.Instance(this.__wasm[e],{env:i(r,n||{})})}return this.__cache[e]},u.prototype.__align=function(e,t){var n=e%(t=t||8);return e+(n?t-n:0)},t.exports=u},{"./lib/base64decode":17,"./lib/wa_detect":23,"object-assign":24}],17:[function(e,t,n){"use strict";t.exports=function(e){for(var t=e.replace(/[\r\n=]/g,""),n=t.length,i=new Uint8Array(3*n>>2),r=0,o=0,s=0;s<n;s++)s%4==0&&s&&(i[o++]=r>>16&255,i[o++]=r>>8&255,i[o++]=255&r),r=r<<6|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(t.charAt(s));var u=n%4*6;return 0===u?(i[o++]=r>>16&255,i[o++]=r>>8&255,i[o++]=255&r):18===u?(i[o++]=r>>10&255,i[o++]=r>>2&255):12===u&&(i[o++]=r>>4&255),i}},{}],18:[function(e,t,n){"use strict";t.exports=function(e,t,n){for(var i,r,o,s=t*n,u=new Uint16Array(s),a=0;a<s;a++)o=e[4*a+2],u[a]=257*(((i=e[4*a])>=(r=e[4*a+1])&&i>=o?i:r>=o&&r>=i?r:o)+(i<=r&&i<=o?i:r<=o&&r<=i?r:o))>>1;return u}},{}],19:[function(e,t,n){"use strict";t.exports={name:"unsharp_mask",fn:e("./unsharp_mask"),wasm_fn:e("./unsharp_mask_wasm"),wasm_src:e("./unsharp_mask_wasm_base64")}},{"./unsharp_mask":20,"./unsharp_mask_wasm":21,"./unsharp_mask_wasm_base64":22}],20:[function(e,t,n){"use strict";var i=e("glur/mono16"),r=e("./hsl_l16");t.exports=function(e,t,n,o,s,u){var a,l,c,f,h,p,g,d,v,y,m,A,b;if(!(0===o||s<.5)){s>2&&(s=2);var w=r(e,t,n),k=new Uint16Array(w);i(k,t,n,s);for(var I=o/100*4096+.5|0,C=257*u|0,B=t*n,_=0;_<B;_++)A=2*(w[_]-k[_]),Math.abs(A)>=C&&(c=e[2+(b=4*_)],p=257*((d=(a=e[b])>=(l=e[b+1])&&a>=c?a:l>=a&&l>=c?l:c)+(g=a<=l&&a<=c?a:l<=a&&l<=c?l:c))>>1,g===d?f=h=0:(h=p<=32767?4095*(d-g)/(d+g)|0:4095*(d-g)/(510-d-g)|0,f=a===d?65535*(l-c)/(6*(d-g))|0:l===d?21845+(65535*(c-a)/(6*(d-g))|0):43690+(65535*(a-l)/(6*(d-g))|0)),(p+=I*A+2048>>12)>65535?p=65535:p<0&&(p=0),0===h?a=l=c=p>>8:(v=2*p-(y=p<=32767?p*(4096+h)+2048>>12:p+((65535-p)*h+2048>>12))>>8,y>>=8,a=(m=f+21845&65535)>=43690?v:m>=32767?v+(6*(y-v)*(43690-m)+32768>>16):m>=10922?y:v+(6*(y-v)*m+32768>>16),l=(m=65535&f)>=43690?v:m>=32767?v+(6*(y-v)*(43690-m)+32768>>16):m>=10922?y:v+(6*(y-v)*m+32768>>16),c=(m=f-21845&65535)>=43690?v:m>=32767?v+(6*(y-v)*(43690-m)+32768>>16):m>=10922?y:v+(6*(y-v)*m+32768>>16)),e[b]=a,e[b+1]=l,e[b+2]=c)}}},{"./hsl_l16":18,"glur/mono16":14}],21:[function(e,t,n){"use strict";t.exports=function(e,t,n,i,r,o){if(!(0===i||r<.5)){r>2&&(r=2);var s=t*n,u=4*s,a=2*s,l=2*s,c=4*Math.max(t,n),f=u,h=f+a,p=h+l,g=p+l,d=g+c,v=this.__instance("unsharp_mask",u+a+2*l+c+32,{exp:Math.exp}),y=new Uint32Array(e.buffer);new Uint32Array(this.__memory.buffer).set(y);var m=v.exports.hsl_l16||v.exports._hsl_l16;m(0,f,t,n),(m=v.exports.blurMono16||v.exports._blurMono16)(f,h,p,g,d,t,n,r),(m=v.exports.unsharp||v.exports._unsharp)(0,0,f,h,t,n,i,o),y.set(new Uint32Array(this.__memory.buffer,0,s))}}},{}],22:[function(e,t,n){"use strict";t.exports="AGFzbQEAAAABMQZgAXwBfGACfX8AYAZ/f39/f38AYAh/f39/f39/fQBgBH9/f38AYAh/f39/f39/fwACGQIDZW52A2V4cAAAA2VudgZtZW1vcnkCAAEDBgUBAgMEBQQEAXAAAAdMBRZfX2J1aWxkX2dhdXNzaWFuX2NvZWZzAAEOX19nYXVzczE2X2xpbmUAAgpibHVyTW9ubzE2AAMHaHNsX2wxNgAEB3Vuc2hhcnAABQkBAAqJEAXZAQEGfAJAIAFE24a6Q4Ia+z8gALujIgOaEAAiBCAEoCIGtjgCECABIANEAAAAAAAAAMCiEAAiBbaMOAIUIAFEAAAAAAAA8D8gBKEiAiACoiAEIAMgA6CiRAAAAAAAAPA/oCAFoaMiArY4AgAgASAEIANEAAAAAAAA8L+gIAKioiIHtjgCBCABIAQgA0QAAAAAAADwP6AgAqKiIgO2OAIIIAEgBSACoiIEtow4AgwgASACIAegIAVEAAAAAAAA8D8gBqGgIgKjtjgCGCABIAMgBKEgAqO2OAIcCwu3AwMDfwR9CHwCQCADKgIUIQkgAyoCECEKIAMqAgwhCyADKgIIIQwCQCAEQX9qIgdBAEgiCA0AIAIgAC8BALgiDSADKgIYu6IiDiAJuyIQoiAOIAq7IhGiIA0gAyoCBLsiEqIgAyoCALsiEyANoqCgoCIPtjgCACACQQRqIQIgAEECaiEAIAdFDQAgBCEGA0AgAiAOIBCiIA8iDiARoiANIBKiIBMgAC8BALgiDaKgoKAiD7Y4AgAgAkEEaiECIABBAmohACAGQX9qIgZBAUoNAAsLAkAgCA0AIAEgByAFbEEBdGogAEF+ai8BACIIuCINIAu7IhGiIA0gDLsiEqKgIA0gAyoCHLuiIg4gCrsiE6KgIA4gCbsiFKKgIg8gAkF8aioCALugqzsBACAHRQ0AIAJBeGohAiAAQXxqIQBBACAFQQF0ayEHIAEgBSAEQQF0QXxqbGohBgNAIAghAyAALwEAIQggBiANIBGiIAO4Ig0gEqKgIA8iECAToqAgDiAUoqAiDyACKgIAu6CrOwEAIAYgB2ohBiAAQX5qIQAgAkF8aiECIBAhDiAEQX9qIgRBAUoNAAsLCwvfAgIDfwZ8AkAgB0MAAAAAWw0AIARE24a6Q4Ia+z8gB0MAAAA/l7ujIgyaEAAiDSANoCIPtjgCECAEIAxEAAAAAAAAAMCiEAAiDraMOAIUIAREAAAAAAAA8D8gDaEiCyALoiANIAwgDKCiRAAAAAAAAPA/oCAOoaMiC7Y4AgAgBCANIAxEAAAAAAAA8L+gIAuioiIQtjgCBCAEIA0gDEQAAAAAAADwP6AgC6KiIgy2OAIIIAQgDiALoiINtow4AgwgBCALIBCgIA5EAAAAAAAA8D8gD6GgIgujtjgCGCAEIAwgDaEgC6O2OAIcIAYEQCAFQQF0IQogBiEJIAIhCANAIAAgCCADIAQgBSAGEAIgACAKaiEAIAhBAmohCCAJQX9qIgkNAAsLIAVFDQAgBkEBdCEIIAUhAANAIAIgASADIAQgBiAFEAIgAiAIaiECIAFBAmohASAAQX9qIgANAAsLC7wBAQV/IAMgAmwiAwRAQQAgA2shBgNAIAAoAgAiBEEIdiIHQf8BcSECAn8gBEH/AXEiAyAEQRB2IgRB/wFxIgVPBEAgAyIIIAMgAk8NARoLIAQgBCAHIAIgA0kbIAIgBUkbQf8BcQshCAJAIAMgAk0EQCADIAVNDQELIAQgByAEIAMgAk8bIAIgBUsbQf8BcSEDCyAAQQRqIQAgASADIAhqQYECbEEBdjsBACABQQJqIQEgBkEBaiIGDQALCwvTBgEKfwJAIAazQwAAgEWUQwAAyEKVu0QAAAAAAADgP6CqIQ0gBSAEbCILBEAgB0GBAmwhDgNAQQAgAi8BACADLwEAayIGQQF0IgdrIAcgBkEASBsgDk8EQCAAQQJqLQAAIQUCfyAALQAAIgYgAEEBai0AACIESSIJRQRAIAYiCCAGIAVPDQEaCyAFIAUgBCAEIAVJGyAGIARLGwshCAJ/IAYgBE0EQCAGIgogBiAFTQ0BGgsgBSAFIAQgBCAFSxsgCRsLIgogCGoiD0GBAmwiEEEBdiERQQAhDAJ/QQAiCSAIIApGDQAaIAggCmsiCUH/H2wgD0H+AyAIayAKayAQQYCABEkbbSEMIAYgCEYEQCAEIAVrQf//A2wgCUEGbG0MAQsgBSAGayAGIARrIAQgCEYiBhtB//8DbCAJQQZsbUHVqgFBqtUCIAYbagshCSARIAcgDWxBgBBqQQx1aiIGQQAgBkEAShsiBkH//wMgBkH//wNIGyEGAkACfwJAIAxB//8DcSIFBEAgBkH//wFKDQEgBUGAIGogBmxBgBBqQQx2DAILIAZBCHYiBiEFIAYhBAwCCyAFIAZB//8Dc2xBgBBqQQx2IAZqCyIFQQh2IQcgBkEBdCAFa0EIdiIGIQQCQCAJQdWqAWpB//8DcSIFQanVAksNACAFQf//AU8EQEGq1QIgBWsgByAGa2xBBmxBgIACakEQdiAGaiEEDAELIAchBCAFQanVAEsNACAFIAcgBmtsQQZsQYCAAmpBEHYgBmohBAsCfyAGIgUgCUH//wNxIghBqdUCSw0AGkGq1QIgCGsgByAGa2xBBmxBgIACakEQdiAGaiAIQf//AU8NABogByIFIAhBqdUASw0AGiAIIAcgBmtsQQZsQYCAAmpBEHYgBmoLIQUgCUGr1QJqQf//A3EiCEGp1QJLDQAgCEH//wFPBEBBqtUCIAhrIAcgBmtsQQZsQYCAAmpBEHYgBmohBgwBCyAIQanVAEsEQCAHIQYMAQsgCCAHIAZrbEEGbEGAgAJqQRB2IAZqIQYLIAEgBDoAACABQQFqIAU6AAAgAUECaiAGOgAACyADQQJqIQMgAkECaiECIABBBGohACABQQRqIQEgC0F/aiILDQALCwsL"},{}],23:[function(e,t,n){"use strict";var i;t.exports=function(){if(void 0!==i)return i;if(i=!1,"undefined"==typeof WebAssembly)return i;try{var e=new Uint8Array([0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11]),t=new WebAssembly.Module(e);return 0!==new WebAssembly.Instance(t,{}).exports.test(4)&&(i=!0),i}catch(n){}return i}},{}],24:[function(e,t,n){"use strict";var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(e,t){for(var n,s,u=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),a=1;a<arguments.length;a++){for(var l in n=Object(arguments[a]))r.call(n,l)&&(u[l]=n[l]);if(i){s=i(n);for(var c=0;c<s.length;c++)o.call(n,s[c])&&(u[s[c]]=n[s[c]])}}return u}},{}],25:[function(e,t,n){var i=arguments[3],r=arguments[4],o=arguments[5],s=JSON.stringify;t.exports=function(e,t){for(var n,u=Object.keys(o),a=0,l=u.length;a<l;a++){var c=o[h=u[a]].exports;if(c===e||c&&c.default===e){n=h;break}}if(!n){n=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var f={};for(a=0,l=u.length;a<l;a++){var h;f[h=u[a]]=h}r[n]=["function(require,module,exports){"+e+"(self); }",f]}var p=Math.floor(Math.pow(16,8)*Math.random()).toString(16),g={};g[n]=n,r[p]=["function(require,module,exports){var f = require("+s(n)+");(f.default ? f.default : f)(self);}",g];var d={};!function e(t){for(var n in d[t]=!0,r[t][1]){var i=r[t][1][n];d[i]||e(i)}}(p);var v="("+i+")({"+Object.keys(d).map(function(e){return s(e)+":["+r[e][0]+","+s(r[e][1])+"]"}).join(",")+"},{},["+s(p)+"])",y=window.URL||window.webkitURL||window.mozURL||window.msURL,m=new Blob([v],{type:"text/javascript"});if(t&&t.bare)return m;var A=y.createObjectURL(m),b=new Worker(A);return b.objectURL=A,b}},{}],"/index.js":[function(e,t,n){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var r=e("object-assign"),o=e("webworkify"),s=e("./lib/mathlib"),u=e("./lib/pool"),a=e("./lib/utils"),l=e("./lib/worker"),c=e("./lib/stepper"),f=e("./lib/tiler"),h={},p=!1;try{"undefined"!=typeof navigator&&navigator.userAgent&&(p=navigator.userAgent.indexOf("Safari")>=0)}catch(w){}var g=1;"undefined"!=typeof navigator&&(g=Math.min(navigator.hardwareConcurrency||1,4));var d,v,y={tile:1024,concurrency:g,features:["js","wasm","ww"],idle:2e3},m={quality:3,alpha:!1,unsharpAmount:0,unsharpRadius:0,unsharpThreshold:0};function A(){return{value:o(l),destroy:function(){if(this.value.terminate(),"undefined"!=typeof window){var e=window.URL||window.webkitURL||window.mozURL||window.msURL;e&&e.revokeObjectURL&&this.value.objectURL&&e.revokeObjectURL(this.value.objectURL)}}}}function b(e){if(!(this instanceof b))return new b(e);this.options=r({},y,e||{});var t="lk_".concat(this.options.concurrency);this.__limit=h[t]||a.limiter(this.options.concurrency),h[t]||(h[t]=this.__limit),this.features={js:!1,wasm:!1,cib:!1,ww:!1},this.__workersPool=null,this.__requested_features=[],this.__mathlib=null}b.prototype.init=function(){var t=this;if(this.__initPromise)return this.__initPromise;if(!1!==d&&!0!==d&&(d=!1,"undefined"!=typeof ImageData&&"undefined"!=typeof Uint8ClampedArray))try{new ImageData(new Uint8ClampedArray(400),10,10),d=!0}catch(c){}!1!==v&&!0!==v&&(v=!1,"undefined"!=typeof ImageBitmap&&(ImageBitmap.prototype&&ImageBitmap.prototype.close?v=!0:this.debug("ImageBitmap does not support .close(), disabled")));var n=this.options.features.slice();if(n.indexOf("all")>=0&&(n=["cib","wasm","js","ww"]),this.__requested_features=n,this.__mathlib=new s(n),n.indexOf("ww")>=0&&"undefined"!=typeof window&&"Worker"in window)try{e("webworkify")(function(){}).terminate(),this.features.ww=!0;var i="wp_".concat(JSON.stringify(this.options));h[i]?this.__workersPool=h[i]:(this.__workersPool=new u(A,this.options.idle),h[i]=this.__workersPool)}catch(c){}var o,l=this.__mathlib.init().then(function(e){r(t.features,e.features)});return o=v?a.cib_support().then(function(e){t.features.cib&&n.indexOf("cib")<0?t.debug("createImageBitmap() resize supported, but disabled by config"):n.indexOf("cib")>=0&&(t.features.cib=e)}):Promise.resolve(!1),this.__initPromise=Promise.all([l,o]).then(function(){return t}),this.__initPromise},b.prototype.resize=function(e,t,n){var o=this;this.debug("Start resize...");var s=r({},m);if(isNaN(n)?n&&(s=r(s,n)):s=r(s,{quality:n}),s.toWidth=t.width,s.toHeight=t.height,s.width=e.naturalWidth||e.width,s.height=e.naturalHeight||e.height,0===t.width||0===t.height)return Promise.reject(new Error("Invalid output size: ".concat(t.width,"x").concat(t.height)));s.unsharpRadius>2&&(s.unsharpRadius=2);var u=!1,l=null;s.cancelToken&&(l=s.cancelToken.then(function(e){throw u=!0,e},function(e){throw u=!0,e}));var h=Math.ceil(Math.max(3,2.5*s.unsharpRadius|0));return this.init().then(function(){if(u)return l;if(o.features.cib){var n=t.getContext("2d",{alpha:Boolean(s.alpha)});return o.debug("Resize via createImageBitmap()"),createImageBitmap(e,{resizeWidth:s.toWidth,resizeHeight:s.toHeight,resizeQuality:a.cib_quality_name(s.quality)}).then(function(e){if(u)return l;if(!s.unsharpAmount)return n.drawImage(e,0,0),e.close(),n=null,o.debug("Finished!"),t;o.debug("Unsharp result");var i=document.createElement("canvas");i.width=s.toWidth,i.height=s.toHeight;var r=i.getContext("2d",{alpha:Boolean(s.alpha)});r.drawImage(e,0,0),e.close();var a=r.getImageData(0,0,s.toWidth,s.toHeight);return o.__mathlib.unsharp_mask(a.data,s.toWidth,s.toHeight,s.unsharpAmount,s.unsharpRadius,s.unsharpThreshold),n.putImageData(a,0,0),a=r=i=n=null,o.debug("Finished!"),t})}var g={};return function e(t,n,s,c){if(u)return l;var y,m,A=(2,function(e){if(Array.isArray(e))return e}(m=t.shift())||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done)&&(n.push(s.value),2!==n.length);i=!0);}catch(a){r=!0,o=a}finally{try{i||null==u.return||u.return()}finally{if(r)throw o}}return n}}(m)||function(e,t){if(e){if("string"==typeof e)return i(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,2):void 0}}(m)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=A[0],w=A[1],k=0===t.length;return c=r({},c,{toWidth:b,toHeight:w,quality:k?c.quality:Math.min(1,c.quality)}),k||((y=document.createElement("canvas")).width=b,y.height=w),function(e,t,n){var i,r,s,c=!1;return Promise.resolve().then(function(){if(s=t.getContext("2d",{alpha:Boolean(n.alpha)}),a.isCanvas(e))return i=e.getContext("2d",{alpha:Boolean(n.alpha)}),null;if(a.isImageBitmap(e))return r=e,c=!0,null;if(a.isImage(e))return v?(o.debug("Decode image via createImageBitmap"),createImageBitmap(e).then(function(e){r=e}).catch(function(e){return null})):null;throw new Error('Pica: ".from" should be Image, Canvas or ImageBitmap')}).then(function(){if(u)return l;o.debug("Calculate tiles");var v=f({width:n.width,height:n.height,srcTileSize:o.options.tile,toWidth:n.toWidth,toHeight:n.toHeight,destTileBorder:h}).map(function(t){return function(t){return o.__limit(function(){if(u)return l;var c;if(a.isCanvas(e))o.debug("Get tile pixel data"),c=i.getImageData(t.x,t.y,t.width,t.height);else{o.debug("Draw tile imageBitmap/image to temporary canvas");var f=document.createElement("canvas");f.width=t.width,f.height=t.height;var h=f.getContext("2d",{alpha:Boolean(n.alpha)});h.globalCompositeOperation="copy",h.drawImage(r||e,t.x,t.y,t.width,t.height,0,0,t.width,t.height),o.debug("Get tile pixel data"),c=h.getImageData(0,0,t.width,t.height),h=f=null}var v={src:c.data,width:t.width,height:t.height,toWidth:t.toWidth,toHeight:t.toHeight,scaleX:t.scaleX,scaleY:t.scaleY,offsetX:t.offsetX,offsetY:t.offsetY,quality:n.quality,alpha:n.alpha,unsharpAmount:n.unsharpAmount,unsharpRadius:n.unsharpRadius,unsharpThreshold:n.unsharpThreshold};return o.debug("Invoke resize math"),Promise.resolve().then(function(){return e=v,Promise.resolve().then(function(){return o.features.ww?new Promise(function(t,n){var i=o.__workersPool.acquire();l&&l.catch(function(e){return n(e)}),i.value.onmessage=function(e){i.release(),e.data.err?n(e.data.err):t(e.data.result)},i.value.postMessage({opts:e,features:o.__requested_features,preload:{wasm_nodule:o.__mathlib.__}},[e.src.buffer])}):o.__mathlib.resizeAndUnsharp(e,g)});var e}).then(function(e){if(u)return l;var n;if(c=null,o.debug("Convert raw rgba tile result to ImageData"),d)n=new ImageData(new Uint8ClampedArray(e),t.toWidth,t.toHeight);else if((n=s.createImageData(t.toWidth,t.toHeight)).data.set)n.data.set(e);else for(var i=n.data.length-1;i>=0;i--)n.data[i]=e[i];return o.debug("Draw tile"),p?s.putImageData(n,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth+1e-5,t.toInnerHeight+1e-5):s.putImageData(n,t.toX,t.toY,t.toInnerX-t.toX,t.toInnerY-t.toY,t.toInnerWidth,t.toInnerHeight),null})})}(t)});function y(){r&&(c||r.close(),r=null)}return o.debug("Process tiles"),Promise.all(v).then(function(){return o.debug("Finished!"),y(),t},function(e){throw y(),e})})}(n,k?s:y,c).then(function(){return k?s:(c.width=b,c.height=w,e(t,y,s,c))})}(c(s.width,s.height,s.toWidth,s.toHeight,o.options.tile,h),e,t,s)})},b.prototype.resizeBuffer=function(e){var t=this,n=r({},m,e);return this.init().then(function(){return t.__mathlib.resizeAndUnsharp(n)})},b.prototype.toBlob=function(e,t,n){return t=t||"image/png",new Promise(function(i){if(e.toBlob)e.toBlob(function(e){return i(e)},t,n);else if(e.convertToBlob)i(e.convertToBlob({type:t,quality:n}));else{for(var r=atob(e.toDataURL(t,n).split(",")[1]),o=r.length,s=new Uint8Array(o),u=0;u<o;u++)s[u]=r.charCodeAt(u);i(new Blob([s],{type:t}))}})},b.prototype.debug=function(){},t.exports=b},{"./lib/mathlib":1,"./lib/pool":9,"./lib/stepper":10,"./lib/tiler":11,"./lib/utils":12,"./lib/worker":13,"object-assign":24,webworkify:25}]},{},[])("/index.js")},iXMy:function(e,t,n){"use strict";n.r(t);var i=n("CcnG"),r=n("mrSG"),o=function(){function e(e){this.activeModal=e}return e.prototype.ngOnInit=function(){},e}(),s=function(){return function(){}}(),u=n("wd/R"),a=n("K9Ia"),l=n("gIcY"),c=n("ny24"),f=n("VnD/"),h=n("S1nX"),p=n("Gi3i"),g=n("MCLT"),d=function(){function e(e,t,n,o){var s=this;this.chatService=e,this.shareService=t,this.ng2ImgMax=n,this.modalService=o,this.listMessages=[],this.typingNotify=[],this.fileTemp="",this.chatter=new i.p,this.badge=new i.p,this.onDestroy$=new a.a,this.onTyping$=new a.a,this.mileStone=0,this.whoTyping=null,this.prevScroll=0,this.messageForm=new l.g({messageRaw:new l.e(null),fileRaw:new l.e(null)}),this.pushMesToList=function(e,t){return r.b(s,void 0,void 0,function(){var t;return r.e(this,function(n){switch(n.label){case 0:return"text"!=e.type&&"binary"!=e.type?[3,2]:[4,this.createObjMes(e)];case 1:0==(t=n.sent()).own&&(this.isTyping=!1),e.message_id<this.mileStone&&(this.listMessages.unshift(t),this.mileStone=e.message_id),e.message_id>this.mileStone&&(this.listMessages.push(t),this.mileStone=e.message_id),n.label=2;case 2:return"typing"!=e.type?[3,4]:[4,this.createObjMes(e)];case 3:t=n.sent(),this.whoTyping=e.data,this.onTyping$.next(t.own),n.label=4;case 4:return"clearBadge"==e.type&&this.clearBadge(0),[2]}})})}}return Object.defineProperty(e.prototype,"messageRaw",{get:function(){return this.messageForm.value.messageRaw},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileRaw",{get:function(){return this.messageForm.value.fileRaw},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.scrollBot=!0;var t=this.shareService.getUserId();this.getGroupChat(t).subscribe(function(){return r.b(e,void 0,void 0,function(){var e,n=this;return r.e(this,function(i){switch(i.label){case 0:return e=this,[4,this.chatService.chatInit(t,this.groupChat.groupId)];case 1:return e.messageReceived=i.sent(),this.chatService.onComingMessage$.pipe(Object(c.a)(this.onDestroy$)).subscribe(function(e){return r.b(n,void 0,void 0,function(){var n,i,o=this;return r.e(this,function(r){switch(r.label){case 0:return""==e?[3,3]:(n=JSON.parse(e),Object(g.isArray)(n)?[4,n.map(function(e){return o.pushMesToList(e,t)})]:[3,2]);case 1:r.sent(),r.label=2;case 2:this.pushMesToList(n,t),r.label=3;case 3:return(i=this.onTyping$.pipe(Object(f.a)(function(e){return!e}),Object(h.a)())).subscribe(function(){o.isTyping=!0}),i.pipe(Object(p.a)(3e3)).subscribe(function(){o.isTyping=!1}),[2]}})})},function(e){return alert(e)}),[2]}})})}),this.subVars=this.chatter.subscribe(function(n){e.chatService.closeWebsocket(),n&&(e.groupChat=n,e.scrollBot=!0,e.listMessages=[],e.chatService.chatInit(t,e.groupChat.groupId))}),this.subVarsToClearBadge=this.badge.subscribe(function(t){t&&(e.groupChat.badge=t)})},e.prototype.ngAfterViewInit=function(){var e=this;this.scrollContainer=this.scrollFrame.nativeElement,this.getMoreMsgOnTop(),this.itemElements.changes.subscribe(function(t){return e.onItemElementsChanged()})},e.prototype.onItemElementsChanged=function(){this.scrollBot?this.scrollToBottom():this.scrollToMiddle()},e.prototype.scrollToBottom=function(){this.scrollContainer.scroll({top:this.scrollContainer.scrollHeight,left:0})},e.prototype.scrollToMiddle=function(){this.scrollContainer.scroll({top:this.scrollContainer.scrollHeight/2,left:0})},e.prototype.getMoreMsgOnTop=function(){var e=this,t=this;this.scrollContainer.addEventListener("scroll",function(){0==e.scrollContainer.scrollTop&&0!=e.listMessages.length&&(t.chatService.loadPrevMsg(e.listMessages[0].messageId),e.scrollBot=!1)})},e.prototype.ngOnDestroy=function(){this.onDestroy$.next(!0),this.subVars&&this.subVars.unsubscribe()},e.prototype.readFile=function(e){var t=this,n=e.target.files[0];this.fileName=n.name,this.fileType=n.type;var i,r=["image/jpg","image/jpeg","image/png","image/gif","image/tiff","image/raw"];r.includes(n.type)&&(this.isImg=!0,n.size>2097152?this.ng2ImgMax.compressImage(n,.2).subscribe(function(e){t.uploadedImage=new File([e],e.name);var i=new FileReader;i.readAsDataURL(n),i.onload=function(e){t.fileTemp=e.target.result,t.messageForm.patchValue({fileRaw:t.fileTemp})}},function(e){console.log(e)}):((i=new FileReader).readAsDataURL(n),i.onload=function(e){t.fileTemp=e.target.result,t.messageForm.patchValue({fileRaw:t.fileTemp})})),r.includes(n.type)||(this.isFile=!0,n.size>20971520?this.sizeAlert():((i=new FileReader).readAsDataURL(n),i.onload=function(e){t.fileTemp=e.target.result,t.messageForm.patchValue({fileRaw:t.fileTemp})}))},e.prototype.sendMessage=function(){var e=this.shareService.getUserId();if(null!=this.messageRaw&&""!=this.messageRaw){console.log("msg send run");var t=this.chatService.encrypt(this.groupChat.password,this.messageRaw);this.chatService.sendMessage(e,this.groupChat.groupId,t)}null!=this.fileRaw&&(console.log("file send run"),t=this.chatService.encrypt(this.groupChat.password,this.fileRaw),this.chatService.sendFile(e,this.groupChat.groupId,t,this.fileName),this.fileTemp="",this.isFile=!1,this.isImg=!1),this.scrollBot=!0,this.clearMsg()},e.prototype.showTyping=function(e){if("Enter"!=e.key){var t=this.shareService.getUserId();this.chatService.showUserTyping(t,this.groupChat.groupId)}},e.prototype.createObjMes=function(e){var t=new s;if("text"==e.type&&(t.type=e.type,t.content=this.chatService.decrypted(this.groupChat.password,e.data),t.messageId=e.message_id),"binary"==e.type){var n=e.data.substring(e.data.length-4,e.data.length);t.type=[".png",".jpg","jpeg",".gif"].includes(n)?"image":"file",t.fileName=e.file_name,t.content=e.data,t.messageId=e.message_id}return t.timestamp=u(e.message_date).format("YYYY[-]MM[-]DD"),t.own=e.sender_id==this.groupChat.userId,t},e.prototype.setClient=function(e){this.chatter.emit(e)},e.prototype.setBadge=function(e){this.badge.emit(e)},e.prototype.changeGroup=function(e){this.setClient(e)},e.prototype.clearBadge=function(e){this.setBadge(e)},e.prototype.getGroupChat=function(e){var t=this,n=this.chatService.getGroupChat(e).pipe(Object(h.a)());return n.subscribe(function(e){t.listGroup=e,t.groupChat=e[0]}),n},e.prototype.clearMsg=function(){this.messageForm.reset()},e.prototype.sizeAlert=function(){this.modalService.open(o,{centered:!0}).componentInstance.msg="The file you have selected is too large. The maximum size is 20MB"},e.prototype.removeFile=function(){this.fileTemp="",this.isFile=!1,this.isImg=!1,this.messageForm.reset()},e}(),v=function(){return function(){}}(),y=n("pMnS"),m=n("4GxJ"),A=i.tb({encapsulation:0,styles:[[""]],data:{}});function b(e){return i.Pb(0,[(e()(),i.vb(0,0,null,null,5,"div",[["class","modal-header"]],null,null,null,null,null)),(e()(),i.vb(1,0,null,null,1,"h4",[["class","modal-title"]],null,null,null,null,null)),(e()(),i.Nb(-1,null,["Alert"])),(e()(),i.vb(3,0,null,null,2,"button",[["aria-label","Close"],["class","close"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.activeModal.dismiss("Cross click")&&i),i},null,null)),(e()(),i.vb(4,0,null,null,1,"span",[["aria-hidden","true"]],null,null,null,null,null)),(e()(),i.Nb(-1,null,["\xd7"])),(e()(),i.vb(6,0,null,null,2,"div",[["class","modal-body"]],null,null,null,null,null)),(e()(),i.vb(7,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),i.Nb(8,null,[" "," "])),(e()(),i.vb(9,0,null,null,2,"div",[["class","modal-footer"]],null,null,null,null,null)),(e()(),i.vb(10,0,null,null,1,"button",[["class","btn"],["type","button"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.activeModal.close("Close click")&&i),i},null,null)),(e()(),i.Nb(-1,null,["Close"]))],null,function(e,t){e(t,8,0,t.component.msg)})}function w(e){return i.Pb(0,[(e()(),i.vb(0,0,null,null,2,"app-alert",[],null,null,null,b,A)),i.Kb(4608,null,m.C,m.C,[i.l,i.u,m.wb,m.D]),i.ub(2,114688,null,0,o,[m.d],null,null)],function(e,t){e(t,2,0)},null)}var k=i.rb("app-alert",o,w,{msg:"msg"},{},[]),I=n("9AJC"),C=n("Ip0R"),B=n("dFej"),_=function(){function e(){}return e.prototype.getOrientedImage=function(e){return new Promise(function(t){var n;B.orientation(e).catch(function(e){}).then(function(i){if(1!=i){var r=document.createElement("canvas"),o=r.getContext("2d"),s=e.width,u=e.height,a=0,l=0,c=0;switch(i){case 3:case 4:a=-e.width,l=-e.height,c=180;break;case 5:case 6:s=e.height,u=e.width,l=-e.height,c=90;break;case 7:case 8:s=e.height,u=e.width,a=-e.width,c=270}r.width=s,r.height=u,[2,4,5,7].indexOf(i)>-1&&(o.translate(s,0),o.scale(-1,1)),o.rotate(c*Math.PI/180),o.drawImage(e,a,l),(n=document.createElement("img")).width=s,n.height=u,n.addEventListener("load",function(){t(n)}),n.src=r.toDataURL("image/png")}else t(e)})})},e}(),E=function(){function e(e){this.imageExifService=e}return e.prototype.compressImage=function(e,t,n,i){var r=this;void 0===n&&(n=!1),void 0===i&&(i=!1);var o=new a.a;if(this.timeAtStart=(new Date).getTime(),this.initialFile=e,"image/jpeg"!==e.type&&"image/png"!==e.type)return setTimeout(function(){o.error({compressedFile:e,reason:"File provided is neither of type jpg nor of type png.",error:"INVALID_EXTENSION"})},0),o.asObservable();if(e.size/1024/1024<t)return setTimeout(function(){o.next(e)},0),o.asObservable();var s=document.createElement("canvas"),u=s.getContext("2d"),l=new Image,c=this;return l.onload=function(){r.imageExifService.getOrientedImage(l).then(function(a){window.URL.revokeObjectURL(l.src),s.width=a.width,s.height=a.height,u.drawImage(a,0,0);var f=u.getImageData(0,0,a.width,a.height);"image/png"===e.type&&r.isImgUsingAlpha(f)&&!n&&o.error({compressedFile:e,reason:"File provided is a png image which uses the alpha channel. No compression possible.",error:"PNG_WITH_ALPHA"}),(u=s.getContext("2d",{alpha:!1})).drawImage(a,0,0),c.getCompressedFile(s,50,t,1).then(function(e){o.next(e),c.logExecutionTime(i)}).catch(function(e){o.error(e),c.logExecutionTime(i)})})},l.src=window.URL.createObjectURL(e),o.asObservable()},e.prototype.getCompressedFile=function(e,t,n,i){var r=this;return new Promise(function(o,s){e.toBlob(function(u){if(i+1>15)s({compressedFile:r.getResultFile(u),reason:"Could not find the correct compression quality in 15 steps.",error:"MAX_STEPS_EXCEEDED"});else{var a=r.getCalculatedQuality(u,t,n,i);r.checkCompressionStatus(e,u,t,n,i,a).then(function(e){o(e)}).catch(function(e){s(e)})}},"image/jpeg",t/100)})},e.prototype.getResultFile=function(e){return this.generateResultFile(e,this.initialFile.name,this.initialFile.type,(new Date).getTime())},e.prototype.generateResultFile=function(e,t,n,i){var r=new Blob([e],{type:n});return this.blobToFile(r,t,i)},e.prototype.blobToFile=function(e,t,n){var i=e;return i.name=t,i.lastModified=n,i},e.prototype.getCalculatedQuality=function(e,t,n,i){var r=e.size/1024/1024,o=n/r;o>5&&(o=5);var s=r/(this.initialFile.size/1024/1024);s<.05&&(s=.05);var u=0,a=10*Math.abs(s-1)/(1.7*i)/o;return a<1&&(a=1),(u=o>=1?t+10*(o-1)*a:t-10*(1-o)*a)>100&&(u=t+(100-t)/2),u<0&&(u=t-t/2),u},e.prototype.checkCompressionStatus=function(e,t,n,i,r,o){var s=this;return new Promise(function(u,a){100===n&&o>=100?a({compressedFile:s.initialFile,reason:"Unfortunately there was an error while compressing the file.",error:"FILE_BIGGER_THAN_INITIAL_FILE"}):n<1&&o<n?a({compressedFile:s.getResultFile(t),reason:"Could not compress image enough to fit the maximal file size limit.",error:"UNABLE_TO_COMPRESS_ENOUGH"}):o>n&&Math.round(n)==Math.round(o)?u(s.getResultFile(t)):r>5&&o>n&&o<n+2?u(s.getResultFile(t)):o>n&&Number.isInteger(n)&&Math.floor(o)==n?u(s.getResultFile(t)):(n>o&&Math.round(n)==Math.round(o)&&(o=Math.round(o)-1),u(s.getCompressedFile(e,o,i,r+1)))})},e.prototype.isImgUsingAlpha=function(e){for(var t=0;t<e.data.length;t+=4)if(255!==e.data[t+3])return!0;return!1},e.prototype.logExecutionTime=function(e){e&&console.info("Execution time: ",(new Date).getTime()-this.timeAtStart+"ms")},e}(),x=n("gkvR"),O=n.n(x),S=function(){function e(){}return e.prototype.getOrientedImage=function(e){return new Promise(function(t){var n;B.orientation(e).catch(function(e){}).then(function(i){if(1!=i){var r=document.createElement("canvas"),o=r.getContext("2d"),s=e.width,u=e.height,a=0,l=0,c=0;switch(i){case 3:case 4:a=-e.width,l=-e.height,c=180;break;case 5:case 6:s=e.height,u=e.width,l=-e.height,c=90;break;case 7:case 8:s=e.height,u=e.width,a=-e.width,c=270}r.width=s,r.height=u,[2,4,5,7].indexOf(i)>-1&&(o.translate(s,0),o.scale(-1,1)),o.rotate(c*Math.PI/180),o.drawImage(e,a,l),(n=document.createElement("img")).width=s,n.height=u,n.addEventListener("load",function(){t(n)}),n.src=r.toDataURL("image/png")}else t(e)})})},e}(),U=function(){function e(e){this.imageExifService=e}return e.prototype.resize=function(e,t,n,i){void 0===i&&(i=!1);for(var r=new a.a,o=0;o<e.length;o++)this.resizeFile(e[o],t,n,i).then(function(e){r.next(e)}).catch(function(e){r.error(e)});return r.asObservable()},e.prototype.resizeCanvas=function(e,t,n){return new Promise(function(i,r){var o=new O.a;o&&o.resize||(o=new window.pica),o.resize(e,t,n).then(function(e){i(e)},function(e){r(e)})})},e.prototype.resizeBuffer=function(e){return new Promise(function(t,n){var i=new O.a;i&&i.resizeBuffer||(i=new window.pica),i.resizeBuffer(e).then(function(e){t(e)},function(e){n(e)})})},e.prototype.resizeFile=function(e,t,n,i){var r=this;return void 0===i&&(i=!1),new Promise(function(o,s){var u=document.createElement("canvas"),a=u.getContext("2d"),l=new Image;l.onload=function(){r.imageExifService.getOrientedImage(l).then(function(c){window.URL.revokeObjectURL(l.src),u.width=c.width,u.height=c.height,a.drawImage(c,0,0);var f=a.getImageData(0,0,c.width,c.height);if(i){var h=Math.min(t/f.width,n/f.height);t=Math.round(f.width*h),n=Math.round(f.height*h)}var p=!0;("image/jpeg"===e.type||"image/png"===e.type&&!r.isImgUsingAlpha(f))&&(p=!1,(a=u.getContext("2d",{alpha:!1})).drawImage(c,0,0));var g=document.createElement("canvas");g.width=t,g.height=n,r.resizeCanvas(u,g,{alpha:p}).then(function(t){t.toBlob(function(t){var n=r.generateResultFile(t,e.name,e.type,(new Date).getTime());o(n)},e.type)}).catch(function(e){s(e)})})},l.src=window.URL.createObjectURL(e)})},e.prototype.isImgUsingAlpha=function(e){for(var t=0;t<e.data.length;t+=4)if(255!==e.data[t+3])return!0;return!1},e.prototype.generateResultFile=function(e,t,n,i){var r=new Blob([e],{type:n});return this.blobToFile(r,t,i)},e.prototype.blobToFile=function(e,t,n){var i=e;return i.name=t,i.lastModified=n,i},e}(),P=function(){return function(){}}(),F=function(){function e(e,t){this.ng2PicaService=e,this.imageExifService=t}return e.prototype.resizeImage=function(e,t,n,i){var r=this;void 0===i&&(i=!1);var o=new a.a;if(this.timeAtStart=(new Date).getTime(),"image/jpeg"!==e.type&&"image/png"!==e.type)return setTimeout(function(){o.error({resizedFile:e,reason:"The provided File is neither of type jpg nor of type png.",error:"INVALID_EXTENSION"})},0),o.asObservable();var s=new Image,u=this;return s.onload=function(){r.imageExifService.getOrientedImage(s).then(function(r){window.URL.revokeObjectURL(s.src);var a=r.width,l=r.height,c=a,f=l;c>t&&(c=t,f*=t/a),l=f,f>n&&(f=n,c*=n/l),f===r.height&&c===r.width?(o.next(e),u.logExecutionTime(i)):u.ng2PicaService.resize([e],c,f).subscribe(function(e){o.next(e),u.logExecutionTime(i)},function(t){o.error({resizedFile:e,reason:t,error:"PICA_ERROR"}),u.logExecutionTime(i)})})},s.src=window.URL.createObjectURL(e),o.asObservable()},e.prototype.logExecutionTime=function(e){e&&console.info("Execution time: ",(new Date).getTime()-this.timeAtStart+"ms")},e}(),j=function(){function e(e,t,n){this.imgMaxSizeService=e,this.imgMaxPXSizeService=t,this.imageExifService=n}return e.prototype.compress=function(e,t,n,i){var r=this;void 0===n&&(n=!1),void 0===i&&(i=!1);var o=new a.a;return e.forEach(function(e){r.compressImage(e,t,n,i).subscribe(function(e){o.next(e)},function(e){o.error(e)})}),o.asObservable()},e.prototype.resize=function(e,t,n,i){var r=this;void 0===i&&(i=!1);var o=new a.a;return e.forEach(function(e){r.resizeImage(e,t,n,i).subscribe(function(e){o.next(e)},function(e){o.error(e)})}),o.asObservable()},e.prototype.compressImage=function(e,t,n,i){return void 0===n&&(n=!1),void 0===i&&(i=!1),this.imgMaxSizeService.compressImage(e,t,n,i)},e.prototype.resizeImage=function(e,t,n,i){return void 0===i&&(i=!1),this.imgMaxPXSizeService.resizeImage(e,t,n,i)},e.prototype.getEXIFOrientedImage=function(e){return this.imageExifService.getOrientedImage(e)},e}(),Q=function(){function e(e){this.ng2ImgMax=e,this.typePhoto=["image/jpg","image/jpeg","image/png","image/gif","image/tiff","image/raw"]}return e.prototype.resizeImg=function(e){if(this.typePhoto.includes(e.type))return this.ng2ImgMax.compressImage(e,2)},e.prototype.resizeFile=function(e){if(!this.typePhoto.includes(e.type))return e.size>20971520},e.ngInjectableDef=i.Rb({factory:function(){return new e(i.Vb(j))},token:e,providedIn:"root"}),e}(),M=n("sjK5"),D=n("dz5x"),T=i.tb({encapsulation:0,styles:[["button[_ngcontent-%COMP%]:focus{outline:0!important}.typing[_ngcontent-%COMP%]{height:35px;border-radius:5px;background-color:#f7f7f7}.att-icon[_ngcontent-%COMP%]{font-size:20px;position:relative;top:10px;cursor:pointer}.preview-img[_ngcontent-%COMP%]{height:100px;box-shadow:0 -1px 2px 0 rgba(0,0,0,.1);background-color:#fff}.preview-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:100%;-o-object-fit:cover;object-fit:cover}.preview-file[_ngcontent-%COMP%]{height:70px;box-shadow:0 -1px 2px 0 rgba(0,0,0,.1);background-color:#fff}.preview-file[_ngcontent-%COMP%]   .fa-file-alt[_ngcontent-%COMP%]{font-size:35px;padding:15px}.preview-file[_ngcontent-%COMP%]   .rounded[_ngcontent-%COMP%]{width:270px;background:#f7f7f7;border-radius:5px}.preview-file[_ngcontent-%COMP%]   .btn-close[_ngcontent-%COMP%]{right:-160px;top:-65px!important}.btn-close[_ngcontent-%COMP%]{position:relative;top:-35px}.content-text-line-clamp[_ngcontent-%COMP%]{display:-webkit-box;overflow:hidden;-webkit-line-clamp:1}.msg[_ngcontent-%COMP%]{overflow-wrap:break-word}"]],data:{}});function R(e){return i.Pb(0,[(e()(),i.vb(0,0,null,null,1,"span",[["class","text"]],null,null,null,null,null)),(e()(),i.Nb(-1,null,[" New message "]))],null,null)}function z(e){return i.Pb(0,[(e()(),i.vb(0,0,null,null,1,"span",[["class","count"]],null,null,null,null,null)),(e()(),i.Nb(1,null,[" "," "]))],null,function(e,t){e(t,1,0,null==t.parent.context.$implicit?null:t.parent.context.$implicit.badge)})}function L(e){return i.Pb(0,[(e()(),i.vb(0,0,null,null,8,"div",[["class","list"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.changeGroup(e.context.$implicit)&&i),i},null,null)),(e()(),i.vb(1,0,null,null,0,"img",[["alt",""],["src","assets/images/avatar.png"]],null,null,null,null,null)),(e()(),i.vb(2,0,null,null,4,"div",[["class","info"]],null,null,null,null,null)),(e()(),i.vb(3,0,null,null,1,"span",[["class","user"]],null,null,null,null,null)),(e()(),i.Nb(4,null,[" "," "])),(e()(),i.kb(16777216,null,null,1,null,R)),i.ub(6,16384,null,0,C.l,[i.U,i.R],{ngIf:[0,"ngIf"]},null),(e()(),i.kb(16777216,null,null,1,null,z)),i.ub(8,16384,null,0,C.l,[i.U,i.R],{ngIf:[0,"ngIf"]},null)],function(e,t){e(t,6,0,0!=(null==t.context.$implicit?null:t.context.$implicit.badge)),e(t,8,0,"0"!=(null==t.context.$implicit?null:t.context.$implicit.badge))},function(e,t){e(t,4,0,null==t.context.$implicit?null:t.context.$implicit.groupName)})}function N(e){return i.Pb(0,[(e()(),i.vb(0,0,null,null,2,"div",[["class","msg"]],null,null,null,null,null)),(e()(),i.vb(1,0,null,null,1,"p",[],null,null,null,null,null)),(e()(),i.Nb(2,null,[" "," "]))],null,function(e,t){e(t,2,0,t.parent.context.$implicit.content)})}function V(e){return i.Pb(0,[(e()(),i.vb(0,0,null,null,1,"div",[["class","msg"]],null,null,null,null,null)),(e()(),i.vb(1,0,null,null,0,"img",[["alt","#image"]],[[8,"src",4]],null,null,null,null))],null,function(e,t){e(t,1,0,null==t.parent.context.$implicit?null:t.parent.context.$implicit.content)})}function G(e){return i.Pb(0,[(e()(),i.vb(0,0,null,null,3,"div",[["class","msg"]],null,null,null,null,null)),(e()(),i.vb(1,0,null,null,0,"i",[["class","fas fa-file-alt mr-2"]],null,null,null,null,null)),(e()(),i.vb(2,0,null,null,1,"a",[["class","text-underline"]],[[2,"text-white",null],[8,"href",4]],null,null,null,null)),(e()(),i.Nb(3,null,[" "," "]))],null,function(e,t){e(t,2,0,t.parent.context.$implicit.own,t.parent.context.$implicit.content),e(t,3,0,t.parent.context.$implicit.fileName)})}function H(e){return i.Pb(0,[(e()(),i.vb(0,0,[[2,0],["item",1]],null,8,"div",[["class","message-list"]],[[2,"me",null]],null,null,null,null)),(e()(),i.kb(16777216,null,null,1,null,N)),i.ub(2,16384,null,0,C.l,[i.U,i.R],{ngIf:[0,"ngIf"]},null),(e()(),i.kb(16777216,null,null,1,null,V)),i.ub(4,16384,null,0,C.l,[i.U,i.R],{ngIf:[0,"ngIf"]},null),(e()(),i.kb(16777216,null,null,1,null,G)),i.ub(6,16384,null,0,C.l,[i.U,i.R],{ngIf:[0,"ngIf"]},null),(e()(),i.vb(7,0,null,null,1,"div",[["class","time"]],null,null,null,null,null)),(e()(),i.Nb(8,null,[" "," "]))],function(e,t){e(t,2,0,"text"==t.context.$implicit.type),e(t,4,0,"image"==t.context.$implicit.type),e(t,6,0,"file"==t.context.$implicit.type)},function(e,t){e(t,0,0,t.context.$implicit.own),e(t,8,0,t.context.$implicit.timestamp)})}function q(e){return i.Pb(0,[(e()(),i.vb(0,0,null,null,2,"div",[["class","typing mx-auto p-2"]],null,null,null,null,null)),(e()(),i.vb(1,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i.Nb(2,null,[" "," "]))],null,function(e,t){e(t,2,0,t.component.whoTyping)})}function W(e){return i.Pb(0,[(e()(),i.vb(0,0,null,null,12,"div",[["class","preview-file py-1"]],null,null,null,null,null)),(e()(),i.vb(1,0,null,null,11,"div",[["class","h-100 rounded ml-1"]],null,null,null,null,null)),(e()(),i.vb(2,0,null,null,10,"div",[["class","h-100 container pb-0"]],null,null,null,null,null)),(e()(),i.vb(3,0,null,null,9,"div",[["class"," h-100 row"]],null,null,null,null,null)),(e()(),i.vb(4,0,null,null,1,"div",[["class","h-100 col-3"]],null,null,null,null,null)),(e()(),i.vb(5,0,null,null,0,"i",[["class","fas fa-file-alt"]],null,null,null,null,null)),(e()(),i.vb(6,0,null,null,6,"div",[["class","h-100 col-9 py-2"]],null,null,null,null,null)),(e()(),i.vb(7,0,null,null,1,"p",[["class","font-weight-bold text-uppercase m-0 content-text-line-clamp"],["style","-webkit-box-orient: vertical"]],null,null,null,null,null)),(e()(),i.Nb(8,null,[" "," "])),(e()(),i.vb(9,0,null,null,1,"span",[["class","content-text-line-clamp"],["style","-webkit-box-orient: vertical"]],null,null,null,null,null)),(e()(),i.Nb(10,null,[" "," "])),(e()(),i.vb(11,0,null,null,1,"button",[["class","btn btn-close"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.removeFile()&&i),i},null,null)),(e()(),i.vb(12,0,null,null,0,"i",[["class","fas fa-times"]],null,null,null,null,null))],null,function(e,t){var n=t.component;e(t,8,0,n.fileType),e(t,10,0,n.fileName)})}function Y(e){return i.Pb(0,[(e()(),i.vb(0,0,null,null,3,"div",[["class","preview-img w-100 p-2"]],null,null,null,null,null)),(e()(),i.vb(1,0,null,null,0,"img",[["alt","imgUpload"]],[[8,"src",4]],null,null,null,null)),(e()(),i.vb(2,0,null,null,1,"button",[["class","btn btn-close"]],null,[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.removeFile()&&i),i},null,null)),(e()(),i.vb(3,0,null,null,0,"i",[["class","fas fa-times"]],null,null,null,null,null))],null,function(e,t){e(t,1,0,t.component.fileTemp)})}function X(e){return i.Pb(0,[i.Lb(671088640,1,{scrollFrame:0}),i.Lb(671088640,2,{itemElements:1}),(e()(),i.vb(2,0,null,null,44,"div",[["class","d-flex"],["id","wrapper"]],null,null,null,null,null)),(e()(),i.vb(3,0,null,null,43,"div",[["id","page-content-wrapper"]],null,null,null,null,null)),(e()(),i.vb(4,0,null,null,42,"div",[["class","container"]],null,null,null,null,null)),(e()(),i.vb(5,0,null,null,41,"div",[["class","row chatbox"]],null,null,null,null,null)),(e()(),i.vb(6,0,null,null,7,"div",[["class","col-12 col-sm-12 col-md-5 col-lg-5"]],null,null,null,null,null)),(e()(),i.vb(7,0,null,null,6,"div",[["class","sidebar"]],null,null,null,null,null)),(e()(),i.vb(8,0,null,null,2,"div",[["class","searchChat"]],null,null,null,null,null)),(e()(),i.vb(9,0,null,null,0,"input",[["class","form-control"],["placeholder","Search Message or Name\u2026"],["type","text"]],null,null,null,null,null)),(e()(),i.vb(10,0,null,null,0,"i",[["class","fal fa-search mr-2 position-absolute"],["style","top: 12px;\n                left: 12px;"]],null,null,null,null,null)),(e()(),i.vb(11,0,null,null,2,"div",[["class","list-wrap"]],null,null,null,null,null)),(e()(),i.kb(16777216,null,null,1,null,L)),i.ub(13,278528,null,0,C.k,[i.U,i.R,i.w],{ngForOf:[0,"ngForOf"]},null),(e()(),i.vb(14,0,null,null,32,"div",[["class","col-12 col-sm-12 col-md-7 col-lg-7"]],null,null,null,null,null)),(e()(),i.vb(15,0,null,null,31,"div",[["class","content"]],null,null,null,null,null)),(e()(),i.vb(16,0,null,null,4,"header",[],null,null,null,null,null)),(e()(),i.vb(17,0,null,null,0,"img",[["alt",""],["src","assets/images/avatar.png"]],null,null,null,null,null)),(e()(),i.vb(18,0,null,null,2,"div",[["class","info"]],null,null,null,null,null)),(e()(),i.vb(19,0,null,null,1,"span",[["class","user"]],null,null,null,null,null)),(e()(),i.Nb(20,null,[" "," "])),(e()(),i.vb(21,0,[[1,0],["scrollFrame",1]],null,4,"div",[["class","message-wrap"]],null,null,null,null,null)),(e()(),i.kb(16777216,null,null,1,null,H)),i.ub(23,278528,null,0,C.k,[i.U,i.R,i.w],{ngForOf:[0,"ngForOf"]},null),(e()(),i.kb(16777216,null,null,1,null,q)),i.ub(25,16384,null,0,C.l,[i.U,i.R],{ngIf:[0,"ngIf"]},null),(e()(),i.vb(26,0,null,null,20,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"submit"],[null,"reset"]],function(e,t,n){var r=!0;return"submit"===t&&(r=!1!==i.Fb(e,28).onSubmit(n)&&r),"reset"===t&&(r=!1!==i.Fb(e,28).onReset()&&r),r},null,null)),i.ub(27,16384,null,0,l.w,[],null,null),i.ub(28,540672,null,0,l.h,[[8,null],[8,null]],{form:[0,"form"]},null),i.Kb(2048,null,l.b,null,[l.h]),i.ub(30,16384,null,0,l.n,[[4,l.b]],null,null),(e()(),i.kb(16777216,null,null,1,null,W)),i.ub(32,16384,null,0,C.l,[i.U,i.R],{ngIf:[0,"ngIf"]},null),(e()(),i.kb(16777216,null,null,1,null,Y)),i.ub(34,16384,null,0,C.l,[i.U,i.R],{ngIf:[0,"ngIf"]},null),(e()(),i.vb(35,0,null,null,11,"div",[["class","message-footer"]],null,null,null,null,null)),(e()(),i.vb(36,0,null,null,2,"div",[["class","sendfile"]],null,null,null,null,null)),(e()(),i.vb(37,0,null,null,0,"i",[["class","fal fa-paperclip att-icon"]],null,null,null,null,null)),(e()(),i.vb(38,0,null,null,0,"input",[["style","cursor: pointer;"],["type","file"]],null,[[null,"change"]],function(e,t,n){var i=!0;return"change"===t&&(i=!1!==e.component.readFile(n)&&i),i},null,null)),(e()(),i.vb(39,0,null,null,5,"input",[["formControlName","messageRaw"],["placeholder","Type your message..."],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"keyup"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0,o=e.component;return"input"===t&&(r=!1!==i.Fb(e,40)._handleInput(n.target.value)&&r),"blur"===t&&(r=!1!==i.Fb(e,40).onTouched()&&r),"compositionstart"===t&&(r=!1!==i.Fb(e,40)._compositionStart()&&r),"compositionend"===t&&(r=!1!==i.Fb(e,40)._compositionEnd(n.target.value)&&r),"keyup"===t&&(r=!1!==o.showTyping(n)&&r),r},null,null)),i.ub(40,16384,null,0,l.c,[i.J,i.n,[2,l.a]],null,null),i.Kb(1024,null,l.k,function(e){return[e]},[l.c]),i.ub(42,671744,null,0,l.f,[[3,l.b],[8,null],[8,null],[6,l.k],[2,l.u]],{name:[0,"name"]},null),i.Kb(2048,null,l.l,null,[l.f]),i.ub(44,16384,null,0,l.m,[[4,l.l]],null,null),(e()(),i.vb(45,0,null,null,1,"button",[],[[8,"disabled",0]],[[null,"click"]],function(e,t,n){var i=!0;return"click"===t&&(i=!1!==e.component.sendMessage()&&i),i},null,null)),(e()(),i.vb(46,0,null,null,0,"i",[["class","fal fa-paper-plane"]],null,null,null,null,null))],function(e,t){var n=t.component;e(t,13,0,n.listGroup),e(t,23,0,n.listMessages),e(t,25,0,n.isTyping),e(t,28,0,n.messageForm),e(t,32,0,n.isFile),e(t,34,0,n.isImg),e(t,42,0,"messageRaw")},function(e,t){var n=t.component;e(t,20,0,null==n.groupChat?null:n.groupChat.groupName),e(t,26,0,i.Fb(t,30).ngClassUntouched,i.Fb(t,30).ngClassTouched,i.Fb(t,30).ngClassPristine,i.Fb(t,30).ngClassDirty,i.Fb(t,30).ngClassValid,i.Fb(t,30).ngClassInvalid,i.Fb(t,30).ngClassPending),e(t,39,0,i.Fb(t,44).ngClassUntouched,i.Fb(t,44).ngClassTouched,i.Fb(t,44).ngClassPristine,i.Fb(t,44).ngClassDirty,i.Fb(t,44).ngClassValid,i.Fb(t,44).ngClassInvalid,i.Fb(t,44).ngClassPending),e(t,45,0,n.messageForm.invalid)})}function K(e){return i.Pb(0,[(e()(),i.vb(0,0,null,null,2,"app-chat",[],null,null,null,X,T)),i.Kb(4608,null,Q,Q,[j]),i.ub(2,4440064,null,0,d,[M.a,D.a,j,m.C],null,null)],function(e,t){e(t,2,0)},null)}var J=i.rb("app-chat",d,K,{},{},[]),Z=n("ZYCi"),$=function(){return function(){}}(),ee=function(){return function(){}}();n.d(t,"ChatModuleNgFactory",function(){return te});var te=i.sb(v,[],function(e){return i.Cb([i.Db(512,i.l,i.fb,[[8,[y.a,k,I.h,I.i,J]],[3,i.l],i.B]),i.Db(4608,C.n,C.m,[i.y,[2,C.C]]),i.Db(4608,l.t,l.t,[]),i.Db(4608,m.C,m.C,[i.l,i.u,m.wb,m.D]),i.Db(4608,S,S,[]),i.Db(4608,U,U,[S]),i.Db(4608,_,_,[]),i.Db(4608,F,F,[U,_]),i.Db(4608,E,E,[_]),i.Db(4608,j,j,[E,F,_]),i.Db(4608,l.d,l.d,[]),i.Db(1073742336,C.b,C.b,[]),i.Db(1073742336,Z.o,Z.o,[[2,Z.t],[2,Z.k]]),i.Db(1073742336,l.s,l.s,[]),i.Db(1073742336,l.i,l.i,[]),i.Db(1073742336,$,$,[]),i.Db(1073742336,m.E,m.E,[]),i.Db(1073742336,P,P,[]),i.Db(1073742336,ee,ee,[]),i.Db(1073742336,l.q,l.q,[]),i.Db(1073742336,v,v,[]),i.Db(1024,Z.i,function(){return[[{path:"",component:d}]]},[])])})}}]);